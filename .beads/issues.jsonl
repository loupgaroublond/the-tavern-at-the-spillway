{"id":"the-tavern-at-the-spillway-04e","title":"Remove unused queue, uncalled method, and single-conformer protocol","description":"1) Delete unused DispatchQueue from PermissionManager.swift:18. 2) Delete CommandContext.recordUsage() (never called) or wire it up. 3) Evaluate ClaudeSessionProtocol — if no second conformer is planned, inline the protocol into ClaudeNativeSessionStorage.","acceptance_criteria":"No dead code remains. All tests pass. No behavioral changes.","status":"closed","priority":3,"issue_type":"chore","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:42.609715-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:00:55.551682-08:00","closed_at":"2026-02-08T23:00:55.551682-08:00","close_reason":"Removed unused DispatchQueue, removed single-conformer ClaudeSessionStorageProtocol. Kept recordUsage() (test API, not dead). 537 tests pass.","labels":["cleanup"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-04e","depends_on_id":"the-tavern-at-the-spillway-md1","type":"parent-child","created_at":"2026-02-08T22:33:42.61169-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-0cy","title":"SDK streaming integration","description":"Wire up ClodeMonster SDK's AsyncSequence streaming to the chat pipeline. Replace batch-only response handling with streaming consumption.","acceptance_criteria":"SDK streaming connected. Tokens arrive progressively through the pipeline.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:55.946733-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:14.50118-08:00","closed_at":"2026-02-08T18:33:14.50118-08:00","close_reason":"Implemented in commit fcd7dad on feature/streaming","labels":["sdk","streaming","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-0cy","depends_on_id":"the-tavern-at-the-spillway-jhm","type":"parent-child","created_at":"2026-02-07T19:44:55.948786-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-0fi","title":"Hygiene daemons — cleanup of dead agents, stale overlays, orphaned resources","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nDaemons handle cleanup: dead agents, old changesets, stale overlays, orphaned workflows/documents/resources. Initially manual cleanup, sophisticated reaping later.\n\nSources: PRD section 6.6 (Hygiene), reader section 8 (Dead Agents Leave Bodies).\n\nKey questions: What triggers cleanup — periodic or event-driven? What is the retention policy for dead agents? How long do bodies persist? Is this a monitor daemon or separate system?","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:02:12.70872-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:02:12.70872-08:00","labels":["agents","lifecycle","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-0fi","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:27.71422-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-0kr","title":"Fix Servitor streaming cancel closure ordering","description":"Servitor.swift:254 — identical fix to Jake. Move queue.sync before innerCancel() in cancel closure.","acceptance_criteria":"Cancel closure acquires queue lock before calling innerCancel(). All streaming tests pass.","status":"closed","priority":2,"issue_type":"bug","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:49.302582-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-09T00:17:14.657736-08:00","closed_at":"2026-02-09T00:17:14.657736-08:00","close_reason":"Moved updateStateAfterResponse() before innerCancel() in Servitor.sendStreaming cancel closure. Build passes.","labels":["agents","concurrency"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-0kr","depends_on_id":"the-tavern-at-the-spillway-lmt","type":"parent-child","created_at":"2026-02-08T22:32:49.305269-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-0o6","title":"Inter-agent message storage — messaging infrastructure in doc store","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nDoc store serves as messaging system (with supporting daemons). Need message storage, routing, delivery confirmation. Messages between agents stored in doc store files.\n\nSources: reader section 7 (Document Store as messaging system), project-status.md Doc Store Remaining (Inter-agent message storage), reader section 9 (Communication Patterns).\n\nKey questions: Message format (markdown? structured data?)? One file per message or conversation log? How does delivery confirmation work? Ordering guarantees? TTL for messages?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:02:12.871482-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:02:12.871482-08:00","labels":["communication","docstore","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-0o6","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:27.834036-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-0ps","title":"Discovery sharing — agents noticing and reporting oddities","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nAgents (even drones) prompted to notice oddities and share them via messaging while continuing main task. Cannot enforce via deterministic hook — relies on prompt engineering encouraging curiosity and social behavior.\n\nSources: PRD section 9.3 (Discovery Sharing).\n\nKey questions: What message format for discoveries? Where are they stored — doc store, separate log? How does user review discoveries? Priority of discoveries vs main task?","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:41.894913-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:41.894913-08:00","labels":["agents","communication","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-0ps","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:26.71928-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-0py","title":"Optimize resource panel UX and UI","description":"The resource panel v1 is functional but needs UX/UI polish. Areas to evaluate: visual hierarchy, spacing, colors, file tree row hover states, selection affordances, scroll behavior, panel resize handles, header styling, file content view typography, and overall integration with the rest of the Tavern UI. The current implementation is bare-bones — it works but does not feel refined.","acceptance_criteria":"Resource panel looks and feels like a native macOS sidebar with polished interactions, consistent with the rest of the Tavern app aesthetic.","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T20:53:01.230651-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-07T20:53:01.230651-08:00","labels":["resource-panel","ui","ux"]}
{"id":"the-tavern-at-the-spillway-0xr","title":"Calling and hanging up — user joining/leaving agent sessions","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nWhen user zooms into an agent, system injects a calling message. When user zooms out, agent receives hanging up message and knows not to pause for interaction. This toggles between chat mode (active conversation) and perseverance mode (background).\n\nSources: reader section 4 (Zooming In and Out), PRD section 5.2 (Calling and Hanging Up), reader open question ?6.\n\nKey questions: What does the injected message look like? Is it a tool call or a text message? Does the agent acknowledge? What happens if user calls while agent is mid-response?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:59:50.609934-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T22:59:50.609934-08:00","labels":["agents","tavern","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-0xr","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:23.887603-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-15i","title":"Plugin system — closed set of agent types and spawners","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nPlugins registered at startup, not dynamically loaded. All agent types known at compile time. This provides security, simplicity, and type safety. Need a registration mechanism for agent types and their spawners.\n\nSources: ADR-001 shape I (Plugin), reader section 5 Architecture Notes, CLAUDE.md Architecture Principles (Closed Plugin Set), project-status.md Architecture Remaining.\n\nKey questions: What agent types exist beyond Jake and MortalAgent? How does registration work? Is this a protocol + registry pattern? How do Gang of Experts fit in?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:08.816621-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:08.816621-08:00","labels":["architecture","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-15i","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:24.128179-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-1cb","title":"Fill spec: quality.md (REQ-QA)","description":"Fill docs/2-spec/quality.md with concrete requirements from PRD §17 (Testability Requirements), §19 (Development Standards), §21 (Performance Requirements). Cover 5 testing principles, perception-bounded performance, logging and stress testing standards.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:43:10.514883-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:12.082621-08:00","closed_at":"2026-02-08T18:06:12.082621-08:00","close_reason":"Filled quality.md with 16 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-1cb","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:43:10.516974-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-1z56","title":"Stress test: concurrent agent spawning and dismissal","description":"Rapidly spawn and dismiss 50+ servitors concurrently. Verify AgentRegistry stays consistent, no name collisions, no orphaned agents, and all operations complete within 5 seconds.","acceptance_criteria":"50 concurrent spawn/dismiss cycles complete without deadlock. Registry count matches expected. No duplicate names. Completes within time budget.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:31.815336-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:02:38.59931-08:00","closed_at":"2026-02-08T23:02:38.59931-08:00","close_reason":"4 concurrent spawn/dismiss tests + 3 sequential spawn tests with timing assertions","labels":["agents","stress"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-1z56","depends_on_id":"the-tavern-at-the-spillway-58x7","type":"parent-child","created_at":"2026-02-08T22:34:31.8179-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-24m","title":"Error block styling polish","description":"Error blocks get distinctive error styling — red border/background, error icon, clear error message formatting.","acceptance_criteria":"Errors immediately recognizable. Error message clearly formatted and readable.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:51.914923-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:09.941098-08:00","closed_at":"2026-02-08T18:09:09.941098-08:00","close_reason":"Implemented in commit e82541e on feature/message-rendering","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-24m","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"parent-child","created_at":"2026-02-07T19:44:51.917079-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-287","title":"Add exhaustive error message mapping tests","description":"Add a test that iterates all TavernError cases and verifies TavernErrorMessages produces a non-empty, actionable message for each. Prevents adding new error cases without corresponding user-facing messages.","acceptance_criteria":"Test fails if any TavernError case produces an empty or generic message. All existing and new cases covered.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:52.503255-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:04:53.663009-08:00","closed_at":"2026-02-08T23:04:53.663009-08:00","close_reason":"9 exhaustive error message tests. All pass.","labels":["errors","testing"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-287","depends_on_id":"the-tavern-at-the-spillway-rm0","type":"parent-child","created_at":"2026-02-08T22:33:52.507111-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-28x","title":"Saved layouts — named templates and concrete snapshots","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nTwo types of saved layouts: abstract templates (structure without specific agents) and concrete snapshots (specific agents, specific state). Session restore is automatic; saved layouts are intentional.\n\nSources: reader section 8 (Persistence), project-status.md Dynamic View Architecture Remaining, transcript_2026-01-21-2345.\n\nKey questions: Storage format? Template vs snapshot distinction in practice? How does a template get populated with real agents? Can layouts be shared via .tavern/?","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:59.541266-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:59.541266-08:00","labels":["persistence","tavern","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-28x","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:27.229302-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-2ah","title":"Epic 7: Management UIs (agents/hooks/mcp)","description":"View and manage agents, hooks, and MCP servers. /agents, /hooks, /mcp commands with substantial UIs.","design":"Each management command renders as a sheet/popover or dedicated pane. /agents: list, configure, manage custom subagents. /hooks: view/edit lifecycle hooks. /mcp: MCP server status, add/remove/reconnect.","acceptance_criteria":"All three management UIs functional. Agent list shows status and config. Hooks editable. MCP servers show connection status with reconnect capability.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:43:42.508391-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:29:29.094604-08:00","closed_at":"2026-02-08T18:29:29.094604-08:00","close_reason":"All children completed","labels":["commands","management","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-2ah","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"blocks","created_at":"2026-02-07T19:44:19.298893-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-2bc","title":"Background agent execution — autonomous work without user focus","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work. Agents should be able to work autonomously in the background while the user focuses elsewhere. Currently agents only respond to direct messages. Background execution enables the full multi-agent vision where many agents work in parallel. Related beads: sidecar pattern (vfx) provides the I/O architecture, perseverance mode (pbt) covers retry/lifecycle, but neither explicitly covers the user-facing concept of agents working while you do other things. Sources: CLAUDE.md Not Implemented, PRD section on agent lifecycle, reader section 3. Key questions: What triggers background work? Task queue? Parent agent delegation? How does the user know background work is happening? Notification when done? How does this interact with token budgets (yte)?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-06T17:55:04.313536-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-06T17:55:04.313536-08:00","labels":["agents","core","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-2bc","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-06T17:55:04.316073-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-2e0","title":"Streaming indicator","description":"Visual cue that a response is still arriving. Typing indicator, pulsing cursor, or similar. Disappears when stream completes.","acceptance_criteria":"Indicator visible during streaming. Disappears on completion. Clear visual signal.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:56.302472-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:14.897078-08:00","closed_at":"2026-02-08T18:33:14.897078-08:00","close_reason":"Implemented in commit fcd7dad on feature/streaming","labels":["streaming","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-2e0","depends_on_id":"the-tavern-at-the-spillway-jhm","type":"parent-child","created_at":"2026-02-07T19:44:56.304656-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-2mo","title":"/mcp — MCP server status, add/remove/reconnect","description":"Management UI for MCP servers. Show connection status for each server. Add new servers, remove existing, trigger reconnection.","acceptance_criteria":"/mcp shows server connection status. Add/remove/reconnect all functional. Status updates in real-time.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:54.516643-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:12.418864-08:00","closed_at":"2026-02-08T18:33:12.418864-08:00","close_reason":"Implemented in commit 9f0ff41 on feature/custom-commands","labels":["commands","management","mcp","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-2mo","depends_on_id":"the-tavern-at-the-spillway-2ah","type":"parent-child","created_at":"2026-02-07T19:45:54.518907-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-2ni","title":"Violation monitoring — configurable per-agent rules and enforcement","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nDynamic violation list configurable per-project or per-agent. Examples: modifying files outside designated directories, exceeding token budgets, spawning more than N children, accessing network when disallowed, running commands on blocklist. When detected: log, notify parent/user, optionally pause/reap/warn.\n\nSources: PRD section 16 (Violation Monitoring).\n\nKey questions: How are rules specified (config file, code, both)? Real-time monitoring or post-hoc? What is the enforcement mechanism — hooks, sandbox, or agent-level checks? Agents cannot modify their own violation rules — how is this enforced?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:23.200527-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:23.200527-08:00","labels":["agents","safety","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-2ni","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:26.176284-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-2pt","title":"Copy button on code blocks","description":"Code blocks (fenced code in markdown responses) get a copy-to-clipboard button. Appears on hover or always visible in corner.","acceptance_criteria":"Copy button visible on code blocks. Clicking copies code content to clipboard. Visual feedback on copy.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:52.067173-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:09.829899-08:00","closed_at":"2026-02-08T18:09:09.829899-08:00","close_reason":"Implemented in commit e82541e on feature/message-rendering","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-2pt","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"parent-child","created_at":"2026-02-07T19:44:52.069291-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-2yy","title":"/agents — agent list, configure, manage","description":"Management UI for agents. List all configured subagents, their types, status. Allow adding/removing/configuring custom subagent definitions.","acceptance_criteria":"/agents opens agent management UI. Lists agents with status. Configuration editable.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:54.224443-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:12.165308-08:00","closed_at":"2026-02-08T18:33:12.165308-08:00","close_reason":"Implemented in commit 9f0ff41 on feature/custom-commands","labels":["commands","management","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-2yy","depends_on_id":"the-tavern-at-the-spillway-2ah","type":"parent-child","created_at":"2026-02-07T19:45:54.226265-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-3p9","title":"Fill spec: deterministic-shell.md (REQ-DET)","description":"Fill docs/2-spec/deterministic-shell.md with concrete requirements from PRD §4.7 (Deterministic Shell). Cover commitment verification, JakeToolHandler protocol, continuation loop.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:51.503563-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:09.798857-08:00","closed_at":"2026-02-08T18:06:09.798857-08:00","close_reason":"Filled deterministic-shell.md with 8 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-3p9","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:42:51.505836-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-3q0","title":"Fill spec: communication.md (REQ-COM)","description":"Fill docs/2-spec/communication.md with concrete requirements from PRD §5.3 (Bubbling), §5.5 (Question Triage). Cover Jake JSON format, lateral collaboration, question surfacing.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:51.66351-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:09.912797-08:00","closed_at":"2026-02-08T18:06:09.912797-08:00","close_reason":"Filled communication.md with 8 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-3q0","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:42:51.66553-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-462","title":"Slash command parser and dispatcher","description":"Parse input starting with / as commands. Dispatch to registered command handlers. Unknown commands show error. Infrastructure for registering commands with name, description, handler.","acceptance_criteria":"/ prefix triggers command parsing. Registered commands dispatch correctly. Unknown commands show helpful error. Command registration API clean and extensible.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:37.146099-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T17:56:10.378797-08:00","closed_at":"2026-02-08T17:56:10.378797-08:00","close_reason":"Parser, dispatcher, protocol, and ChatViewModel integration complete with 30+ tests","labels":["commands","infrastructure","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-462","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"parent-child","created_at":"2026-02-07T19:45:37.148017-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-4ij","title":"Fill spec: user-experience.md (REQ-UX)","description":"Fill docs/2-spec/user-experience.md with concrete requirements from PRD §5.1 (The Core Loop), §5.4 (UI Principles), §8 (Progressive Unlocks). Cover multi-window, project-as-document, content blocks.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:43:01.174018-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:10.135167-08:00","closed_at":"2026-02-08T18:06:10.135167-08:00","close_reason":"Filled user-experience.md with 11 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-4ij","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:43:01.177191-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-4lh","title":"Fill spec: workflows.md (REQ-WRK)","description":"Fill docs/2-spec/workflows.md with concrete requirements from PRD §10 (Workflows), §11 (Gang of Experts), §6.5 (Merge Queue). Cover workflow engine, spec engine, gang of experts pattern. Not yet implemented.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:43:01.667385-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:12.899361-08:00","closed_at":"2026-02-08T18:06:12.899361-08:00","close_reason":"Filled workflows.md with 8 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-4lh","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:43:01.670121-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-58x7","title":"Stress Testing Epic: Comprehensive Grade 5 test suite","description":"Current Grade 5 stress tests (9 tests, 3 files) verify 'doesn't crash' but lack performance assertions, throughput requirements, and coverage of newer features. Need comprehensive stress testing across all major subsystems.","design":"Each child bead targets a specific subsystem with realistic load. Tests include timing assertions (must complete within X seconds), memory assertions (no unbounded growth), and concurrency assertions (no deadlock, no data corruption).","acceptance_criteria":"Grade 5 suite covers all major subsystems. Each test has explicit performance budget. Tests catch regressions in throughput and resource usage.","status":"closed","priority":2,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:31.647826-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:02:53.990233-08:00","closed_at":"2026-02-08T23:02:53.990233-08:00","close_reason":"All 8 child beads complete. 39 new stress tests across 8 files covering agents, streaming, sessions, commands, permissions, file tree, chat, and side pane. All compile. Grade 1+2 still passing.","labels":["gap-analysis","stress","testing"]}
{"id":"the-tavern-at-the-spillway-5ft","title":"iCloud personal state storage — sync preferences across machines","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nPersonal state (session IDs, window positions, persisted agent list) currently in UserDefaults. Could sync via iCloud for cross-machine continuity.\n\nSources: project-status.md Document-Based Architecture Remaining, reader section 7 (Session Storage Layers - layer 3).\n\nKey questions: What state is worth syncing? iCloud KV store vs CloudKit? Conflict resolution? Does this conflict with the known iCloud corruption issue with Xcode projects?","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:02:13.028749-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:02:13.028749-08:00","labels":["persistence","tavern","ux"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-5ft","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:27.9546-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-5hg","title":"GAP-09: Update architecture docs for actual concurrency model","description":"CLAUDE.md and architecture docs describe a 'Sidecar Pattern for I/O' with separate sidecar actors per agent. In reality, agents call messenger directly via async/await. Docs should reflect what actually exists.","acceptance_criteria":"Architecture documentation accurately describes the async/await concurrency model. Sidecar pattern either removed from docs or marked as future work.","status":"closed","priority":3,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:37.518271-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:53:29.570308-08:00","closed_at":"2026-02-08T22:53:29.570308-08:00","close_reason":"Child bq8 complete. CLAUDE.md updated to reflect async/await concurrency model instead of unimplemented sidecar pattern.","labels":["architecture","docs","gap-analysis"]}
{"id":"the-tavern-at-the-spillway-60c","title":"Timestamps on messages","description":"Each message shows a timestamp. Could be subtle/muted text. Relative time (2m ago) or absolute (14:32) TBD.","acceptance_criteria":"Every message displays a timestamp. Timestamps update or are accurate.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:52.222052-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:10.271916-08:00","closed_at":"2026-02-08T18:09:10.271916-08:00","close_reason":"Implemented in commit e82541e on feature/message-rendering","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-60c","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"parent-child","created_at":"2026-02-07T19:44:52.224808-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-60s","title":"Integration tests for permission enforcement","description":"Grade 2 tests verifying all permission modes work end-to-end through the agent execution path. Use MockMessenger with injected PermissionManager. Verify bypass allows, plan denies, dontAsk denies unmatched, normal returns nil for prompt.","acceptance_criteria":"Tests cover all 5 modes. Tests verify always-allow rules bypass prompts. Tests verify permission denial stops tool execution.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:21.44959-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:15:27.995174-08:00","closed_at":"2026-02-08T23:15:27.995174-08:00","close_reason":"20 tests covering all permission modes, rule matching, wildcard rules, mode switching, ChatViewModel approval handler, and processApprovalResponse. All 545 Grade 1+2 tests passing.","labels":["permissions","testing"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-60s","depends_on_id":"the-tavern-at-the-spillway-mrh","type":"parent-child","created_at":"2026-02-08T22:32:21.451694-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-618c","title":"Stress test: streaming under concurrent load","description":"Run 10+ concurrent streaming sessions via MockMessenger. Verify all streams complete, no interleaved content, no memory leaks from accumulated messages. Include rapid cancel/restart cycles.","acceptance_criteria":"10 concurrent streams complete correctly. Content matches expected per-stream. Memory doesn't grow unbounded. Rapid cancel/restart (100 cycles) doesn't deadlock.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:31.99336-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:02:39.634413-08:00","closed_at":"2026-02-08T23:02:39.634413-08:00","close_reason":"4 streaming stress tests: concurrent streams, cancel/restart, large response, tool event ordering","labels":["streaming","stress"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-618c","depends_on_id":"the-tavern-at-the-spillway-58x7","type":"parent-child","created_at":"2026-02-08T22:34:31.995484-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-67c","title":"Tool approval dialog UI","description":"When a tool call requires approval, show inline dialog with tool name, parameters, and Allow/Deny buttons. Must integrate with SDK canUseTool callback.","acceptance_criteria":"Tool calls trigger approval dialog. Dialog shows tool name and parameters. Allow/Deny buttons functional. Response sent back to SDK.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:16.823521-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:10.942759-08:00","closed_at":"2026-02-08T18:09:10.942759-08:00","close_reason":"Implemented in commit ddb51a9 on feature/permissions","labels":["permissions","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-67c","depends_on_id":"the-tavern-at-the-spillway-m3o","type":"parent-child","created_at":"2026-02-07T19:45:16.82573-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-687","title":"Visual distinction between message types","description":"Each message type (text, tool_use, tool_result, thinking, error) gets distinct visual treatment — colored boxes, borders, cards. Exact styling TBD via experimentation.","acceptance_criteria":"All MessageType variants render with distinct visual identity. Clear at a glance which type a block is.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:50.865728-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:09.370107-08:00","closed_at":"2026-02-08T18:09:09.370107-08:00","close_reason":"Implemented in commit e82541e on feature/message-rendering","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-687","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"parent-child","created_at":"2026-02-07T19:44:50.868606-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-6ap","title":"Resource panel / file viewer — IDE-lite right-side panel","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nRight-side panel showing file tree, file contents, and diffs alongside chat. Goal: make Tavern usable as a standalone dev environment at v1.5 without needing a separate IDE.\n\nSources: resource-viewer session (Feb 6), ideation for resource panel feature.\n\nKey questions: What file types need rendering? Syntax highlighting approach? How do agent file changes surface in the panel? Read-only or editable? How does this interact with the doc store / shared workspace pattern?","status":"closed","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-06T17:54:32.32481-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-06T17:55:21.367294-08:00","closed_at":"2026-02-06T17:55:21.367294-08:00","close_reason":"Duplicate of the-tavern-at-the-spillway-my4","labels":["tavern","ui","v1.5"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-6ap","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-06T17:54:32.327648-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-6eg","title":"/stats — usage visualization","description":"Implement /stats showing session usage visualization — messages sent, tool calls made, time elapsed, cost over time.","acceptance_criteria":"/stats displays session statistics in visual format.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:38.138164-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:13:58.826238-08:00","closed_at":"2026-02-08T18:13:58.826238-08:00","close_reason":"Implemented in commit a279429 on feature/slash-commands","labels":["commands","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-6eg","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"parent-child","created_at":"2026-02-07T19:45:38.13982-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-6ts","title":"Epic 8: Side Pane — TODOs \u0026 Background Tasks","description":"Side pane shows TODOs and background tasks alongside the chat. Coordinates with file viewer pane work (another agent building that infrastructure).","design":"Add content tabs to existing side pane infrastructure. /todos tab shows task list. /bashes tab shows background task list with status. Task management: view output, stop task.","acceptance_criteria":"Side pane has TODO and background task tabs. Background tasks show live status. Can view output and stop tasks from the pane.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:43:46.844462-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T19:00:24.858284-08:00","closed_at":"2026-02-08T19:00:24.858284-08:00","close_reason":"All children completed","labels":["side-pane","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-6ts","depends_on_id":"the-tavern-at-the-spillway-my4","type":"relates-to","created_at":"2026-02-07T19:47:12.066623-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-6up","title":"Self-improvement — measurement, workflow evolution, meta process","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nNo self-improvement exists currently. Options range from better logging to ML-based prompt optimization to evolutionary workflow design. Meta process: decision layer for selecting which workflows/tools to use for a given task.\n\nSources: reader open question ?3 (Self Improvement Definition), PRD section 9.2 (Meta Process), notes_issues-to-plan-for item 5 (No self-improvement).\n\nKey questions: What does self-improvement mean concretely for v1? Performance tracking and manual adjustment? Automated A/B testing of prompts? Learning from successful vs failed agent runs?","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:23.529093-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:23.529093-08:00","labels":["meta","observability","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-6up","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:26.454708-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-72v","title":"Fill spec: invariants.md (REQ-INV)","description":"Fill docs/2-spec/invariants.md with concrete requirements from PRD §2 (Invariants). 8 hard-enforced invariants to formalize.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:41.452868-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:09.366492-08:00","closed_at":"2026-02-08T18:06:09.366492-08:00","close_reason":"Filled invariants.md with 8 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-72v","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:42:41.454601-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-75p","title":"Add specific TavernError cases for known failure modes","description":"Add cases: .agentNameConflict(name:), .commitmentTimeout(commitmentId:), .mcpServerFailed(reason:), .permissionDenied(toolName:), .commandNotFound(name:). Update TavernErrorMessages to map each new case to actionable user-facing messages.","acceptance_criteria":"Each new error case has a corresponding TavernErrorMessages mapping. Code that currently throws .internalError for known failures uses the specific case instead.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:52.318041-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:03:16.698663-08:00","closed_at":"2026-02-08T23:03:16.698663-08:00","close_reason":"Added 5 specific error cases with error messages and ChatViewModel logging. 537 tests pass.","labels":["errors"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-75p","depends_on_id":"the-tavern-at-the-spillway-rm0","type":"parent-child","created_at":"2026-02-08T22:33:52.32015-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-7dg","title":"Programmatic GUI testing — XCTest UI and log-based verification","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nNeed programmatic GUI testing infrastructure. Headless testing philosophy: tests run without human interaction, end-to-end over stubs, testing strategy IS debugging strategy. Also need log-based automated verification and performance regression baselines.\n\nSources: transcript_2026-01-23-headless-testing, project-status.md Build and Testing Remaining, PRD section 17 (Testability Requirements).\n\nKey questions: XCTest UI vs alternative? How to headlessly test SwiftUI views? Baseline methodology? Integration with redo build system?","status":"open","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:59.852192-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:59.852192-08:00","labels":["infrastructure","tavern","testing"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-7dg","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:27.47686-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-7g5","title":"Argument substitution in custom commands","description":"Custom command .md files support $ARGUMENTS (full args), $1, $2, etc. placeholders. Substituted at execution time.","acceptance_criteria":"$ARGUMENTS replaced with full argument string. $1, $2 etc. replaced with positional args. Missing args handled gracefully.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:46.812527-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:11.805708-08:00","closed_at":"2026-02-08T18:33:11.805708-08:00","close_reason":"Implemented in commit 9f0ff41 on feature/custom-commands","labels":["commands","customization","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-7g5","depends_on_id":"the-tavern-at-the-spillway-l2q","type":"parent-child","created_at":"2026-02-07T19:45:46.81484-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-7g6","title":"Streaming responses — replace batch-only with real-time UI","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work. Currently Jake and mortal agents return batch responses only. Need real-time streaming to the UI with typewriter effect. The SDK (ClodeMonster) returns ClaudeQuery as AsyncSequence of StdoutMessage, which supports streaming. Sources: CLAUDE.md Not Implemented, project-status.md Chat and UI Remaining, PRD section 5.1, transcript_2026-01-24-async-primitives (AsyncStream strategy). Key questions: What does the streaming UI look like? Typewriter per-character or per-token? How do content blocks (thinking, tool_use) render during streaming? How does this interact with the batching strategy?","status":"closed","priority":1,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:58:26.071687-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:15.022099-08:00","closed_at":"2026-02-08T18:33:15.022099-08:00","close_reason":"Implemented in commit fcd7dad on feature/streaming","labels":["core","tavern","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-7g6","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T22:59:07.850441-08:00","created_by":"Yaakov M Nemoy"},{"issue_id":"the-tavern-at-the-spillway-7g6","depends_on_id":"the-tavern-at-the-spillway-jhm","type":"relates-to","created_at":"2026-02-07T19:47:11.652372-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-7jj","title":"Instrument non-compliant views: LineNumberedText, MultiLineTextInput","description":"LineNumberedText has no instrumentation. MultiLineTextInput has a Logger defined on line 22 but never uses it. Add all 5 required logging categories. For MultiLineTextInput: log makeNSView, updateNSView, textDidChange, doCommandBy (key events), updateHeight.","acceptance_criteria":"Both views have body evaluation logging, lifecycle events, and relevant state change logging. MultiLineTextInput logger is actively used for key event handling and height changes.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:39.601294-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:59:47.017969-08:00","closed_at":"2026-02-08T22:59:47.017969-08:00","close_reason":"Both views instrumented. LineNumberedText has body logging. MultiLineTextInput has logging for makeNSView, updateNSView, textDidChange, doCommandBy, updateHeight. Fixed pre-existing @MainActor isolation issue.","labels":["instrumentation","views"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-7jj","depends_on_id":"the-tavern-at-the-spillway-7us","type":"parent-child","created_at":"2026-02-08T22:32:39.603504-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-7mv","title":"Replace waitUntilExit with terminationHandler in ShellAssertionRunner","description":"In CommitmentVerifier.swift ShellAssertionRunner.run(), replace process.waitUntilExit() (line ~116) with process.terminationHandler. Resume the continuation from the handler. Keep timeout logic using DispatchWorkItem.","acceptance_criteria":"No blocking calls on any thread pool thread. Process completion handled via callback. Timeout still terminates runaway processes. All 34 CommitmentTests pass.","status":"closed","priority":2,"issue_type":"bug","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:01.803576-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:58:45.789164-08:00","closed_at":"2026-02-08T22:58:45.789164-08:00","close_reason":"Replaced waitUntilExit() with Process.terminationHandler. All 525 tests pass.","labels":["commitments","concurrency"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-7mv","depends_on_id":"the-tavern-at-the-spillway-bf0","type":"parent-child","created_at":"2026-02-08T22:33:01.805689-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-7nl","title":"Slash command autocomplete in input","description":"Typing / in input field shows autocomplete popup listing available commands with descriptions. Filters as user types. Tab/Enter selects.","acceptance_criteria":"/ triggers autocomplete. Commands listed with descriptions. Filtering works. Selection inserts command.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:37.292461-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:05:31.215663-08:00","closed_at":"2026-02-08T18:05:31.215663-08:00","close_reason":"Autocomplete ViewModel, UI popup, keyboard nav, 16 tests all passing","labels":["commands","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-7nl","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"parent-child","created_at":"2026-02-07T19:45:37.294873-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-7ou","title":"User consent for new chats — concrete consent UX","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nPRD invariant 4: User attention is sacred. Never force new content on user without consent. What does 100% clear theyre OK with it mean concretely? User preference settings? Contextual inference? Per-agent consent?\n\nSources: reader open question ?7 (User Consent for New Chats), PRD invariant 4.\n\nKey questions: Settings panel for notification preferences? Auto-accept from Jake but confirm from others? Context-dependent (during active session vs background)? How does this interact with bubbling?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:42.050942-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:42.050942-08:00","labels":["tavern","ui","ux"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-7ou","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:26.845812-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-7us","title":"GAP-02: View instrumentation compliance","description":"5 SwiftUI views violate the project's mandatory instrumentation requirements (body evaluation, conditional branches, lifecycle events, task execution, state changes). Most other views are partially compliant. None are fully compliant.","design":"Add comprehensive logging per docs/4-docs/gui-instrumentation-guide.md to all 16 views. Prioritize the 5 non-compliant views first.","acceptance_criteria":"All 16 views have: body evaluation logging, conditional branch logging, .onAppear/.onDisappear, .task logging with UUID correlation, .onChange for critical state. MultiLineTextInput uses its existing (unused) logger.","status":"closed","priority":2,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:39.260348-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:24:48.248431-08:00","closed_at":"2026-02-08T23:24:48.248431-08:00","close_reason":"All 4 child beads complete: dow (3 non-compliant views), 7jj (2 non-compliant views), ekq (9 partially compliant views), zer (14 instrumentation tests). All 15 views now have instrumentation. Build and tests pass.","labels":["gap-analysis","instrumentation","views"]}
{"id":"the-tavern-at-the-spillway-84c","title":"Inter-agent communication — bubbling, lateral messaging, direct-to-user","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nAgents need to communicate: upward (child to parent to user), laterally (siblings collaborating), and directly to user (with oversight). Currently no inter-agent messaging exists.\n\nSources: reader section 3 (Bubbling), reader section 9 (Agent Communication, Message Protocol), reader open question ?5 (Bubbling Up Process), PRD section 5.3 (Bubbling), notes_issues-to-plan-for item 1 (Context handoff).\n\nKey questions: Does child ask parent who decides to escalate? Can messages skip levels? Is there prioritization? How does lateral collaboration work concretely? What is stored in doc store vs ephemeral?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:59:50.450796-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T22:59:50.450796-08:00","labels":["agents","communication","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-84c","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:23.76542-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-8wt","title":"Drones and monitor daemons — lightweight agent types","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nDrones: Meeseeks-style single-task agents. One task then terminate. Cheap models, cheap to fail. Monitor Daemons: background agents that work for Jake, monitoring health/progress/spending.\n\nSources: PRD section 4.1 (Agent Types table), PRD section 6.6 (Hygiene), reader section 3.\n\nKey questions: What model for drones (Haiku)? What triggers drone creation? What do monitor daemons actually monitor? How do drones differ from Task subagents? Cost model for drones?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:46.67402-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:46.67402-08:00","labels":["agents","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-8wt","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:25.126097-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-96m","title":"SDK testing strategy — restore testability after ClodeMonster migration","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nClodeMonster SDK uses static functions (ClaudeCode.query) with no dependency injection point. Multiple test files have TODO comments: 'These tests need dependency injection or SDK mocking to work.' Affects: JakeTests, ChatViewModelTests, ServitorTests, TavernCoordinatorTests, ChatStressTests, ConcurrencyStressTests, SDKDiagnosticTests.\n\nSources: All TODO comments in Tests/**/*.swift, transcript_2026-02-01-sdk-migration-and-session-forensics (testing impact section), reader section 5 SDK Migration.\n\nKey questions: Protocol wrapper around static SDK? Test-only subclass? Process-level mocking? Do we push upstream for DI support in ClodeMonster?","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:59:30.082859-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:35:53.965705-08:00","closed_at":"2026-02-08T18:35:53.965705-08:00","close_reason":"Implemented in commit 163d84d on feature/core-infra","labels":["sdk","tavern","testing"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-96m","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:23.38992-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-9f9","title":"Work queues — drone dispatch and queue mechanics in doc store","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nWork queues live in the document store. When items appear, drones fire immediately. Agents attach at spawn or mid-task. Need: queue creation, item addition, drone dispatch, empty-queue instructions (idle, hibernate, terminate).\n\nSources: reader section 7 (Document Store as work queues), reader open question ?19 (Work Queues), PRD section 6.3 (Work Queues), project-status.md Doc Store Remaining.\n\nKey questions: Full specification of queue mechanics? Priorities and dependencies within queues? File format for queue items? How does drone dispatch work — filesystem watcher or polling?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:09.158029-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:09.158029-08:00","labels":["agents","docstore","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-9f9","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:24.369908-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-9fq","title":"/status — version, model, account, connectivity","description":"Implement /status showing app version, current model, account info, and API connectivity status.","acceptance_criteria":"/status displays version, model, account, and connectivity. All fields accurate.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:37.861647-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:13:58.610422-08:00","closed_at":"2026-02-08T18:13:58.610422-08:00","close_reason":"Implemented in commit a279429 on feature/slash-commands","labels":["commands","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-9fq","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"parent-child","created_at":"2026-02-07T19:45:37.863331-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-9gd","title":"Fill spec: v1-scope.md (REQ-V1)","description":"Fill docs/2-spec/v1-scope.md with concrete requirements from PRD §18 (V1 Scope), §20 (Success Criteria). Cover scope boundaries, what ships vs what is deferred, success metrics.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:43:10.68456-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:12.205664-08:00","closed_at":"2026-02-08T18:06:12.205664-08:00","close_reason":"Filled v1-scope.md with 17 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-9gd","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:43:10.686709-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-9p3","title":"Discover .claude/commands/*.md files","description":"Scan project .claude/commands/ and user ~/.claude/commands/ directories for .md command files. Parse command name from filename.","acceptance_criteria":"Project and user command directories scanned. Commands discovered and registered. Handles missing directories gracefully.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:46.505975-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:11.686985-08:00","closed_at":"2026-02-08T18:33:11.686985-08:00","close_reason":"Implemented in commit 9f0ff41 on feature/custom-commands","labels":["commands","customization","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-9p3","depends_on_id":"the-tavern-at-the-spillway-l2q","type":"parent-child","created_at":"2026-02-07T19:45:46.507717-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-9uc","title":"Create /audit-spec command — PRD-to-Spec coverage verification","description":"Build a slash command that walks the PRD section by section, checks that 2-spec/index.md maps each one to a module, then reads each module to verify requirements actually exist (not just placeholders). Reports coverage gaps and status. Cross-checks downstream references — e.g. if a spec module says code lives in Agents/, verify that directory exists and has tests. Output: coverage report showing PRD sections → spec modules → requirement count → status. Modeled after /audit-transcripts but for the spec pipeline stage.","acceptance_criteria":"Command runs end-to-end. Every PRD section checked against index.md. Each spec module read and requirement count extracted. Downstream code/test directories validated. Gap report generated. No false positives on skeleton modules (they should show as skeleton, not missing).","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:41:56.362828-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-07T18:41:56.362828-08:00","labels":["pipeline","spec","tooling"]}
{"id":"the-tavern-at-the-spillway-9um","title":"Replace AnyAgent with 'any Agent' throughout codebase","description":"Remove AnyAgent class from Agent.swift. Update AgentRegistry to store [UUID: any Agent]. Update all call sites that create or consume AnyAgent. Verify Agent protocol has appropriate primary associated types if needed for existential usage.","acceptance_criteria":"AnyAgent class deleted. AgentRegistry, TavernCoordinator, AgentListViewModel all use 'any Agent'. All tests pass.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:30.018474-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-09T00:30:04.010029-08:00","closed_at":"2026-02-09T00:30:04.010029-08:00","close_reason":"AnyAgent deleted, replaced with 'any Agent' existentials in AgentRegistry, ChatViewModel, ServitorSpawner. 551 tests pass.","labels":["agents","refactor"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-9um","depends_on_id":"the-tavern-at-the-spillway-qn7","type":"parent-child","created_at":"2026-02-08T22:33:30.020444-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-9y6","title":"/todos tab in side pane","description":"Add TODO list tab/section to the side pane. Shows active TODOs from the current session. Checkable items.","acceptance_criteria":"TODO tab shows task list. Items checkable. List updates as tasks are created/completed.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:58.495486-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:52:37.662953-08:00","closed_at":"2026-02-08T18:52:37.662953-08:00","close_reason":"Implemented in commit 6d7ff63 on feature/side-pane","labels":["side-pane","todos","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-9y6","depends_on_id":"the-tavern-at-the-spillway-6ts","type":"parent-child","created_at":"2026-02-07T19:45:58.497489-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-a50p","title":"Stress test: file tree scanning large directories","description":"Create a temp directory with 10,000+ files across 500+ subdirectories. Scan via FileTreeScanner. Verify scanning completes within 5 seconds and memory stays bounded.","acceptance_criteria":"10K file tree scanned within 5 seconds. Memory doesn't spike beyond 50MB. All files and directories correctly enumerated.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:32.674245-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:02:46.363122-08:00","closed_at":"2026-02-08T23:02:46.363122-08:00","close_reason":"4 file tree tests: 10K files, deep nesting, ignored dirs, sorting correctness","labels":["resources","stress"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-a50p","depends_on_id":"the-tavern-at-the-spillway-58x7","type":"parent-child","created_at":"2026-02-08T22:34:32.676317-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-afx","title":"Don't Ask mode — auto-deny unmatched tools","description":"Don't Ask mode auto-denies tool calls that don't have a matching allow rule. No dialog shown for denied tools.","acceptance_criteria":"Don't Ask mode functional. Unmatched tools auto-denied without dialog. Allowed tools still proceed.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:17.267981-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:11.384102-08:00","closed_at":"2026-02-08T18:09:11.384102-08:00","close_reason":"Implemented in commit ddb51a9 on feature/permissions","labels":["permissions","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-afx","depends_on_id":"the-tavern-at-the-spillway-m3o","type":"parent-child","created_at":"2026-02-07T19:45:17.270871-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-an7","title":"Component-based chat views — thinking, tools, text as separate renderers","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work. Render different message content types (thinking blocks, tool_use blocks, text responses) as separate SwiftUI components within the chat view. Distinct from tile layout (coj) which is about window-level arrangement — this is about rendering within a single chat. Sources: reader_2026-02-05 Section 9 UI Concepts (component-based chat views TBD), MessageType enum already exists in codebase. Key questions: What does each content block type look like visually? Collapsible thinking blocks? Tool use as inline cards? How does this interact with streaming (7g6)? Does the existing MessageType enum cover all needed cases?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-06T17:55:01.941343-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-06T17:55:01.941343-08:00","labels":["chat","tavern","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-an7","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-06T17:55:01.94345-08:00","created_by":"Yaakov M Nemoy"},{"issue_id":"the-tavern-at-the-spillway-an7","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"relates-to","created_at":"2026-02-07T19:47:11.791267-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-aog1","title":"Stress test: command dispatch under rapid fire","description":"Dispatch 100+ slash commands in rapid succession via SlashCommandDispatcher. Include mix of valid, invalid, custom, and autocomplete queries. Verify no crashes, correct responses, and completion within time budget.","acceptance_criteria":"100 rapid command dispatches complete correctly. No race conditions. Autocomplete responds within 10ms per query. Invalid commands produce error responses.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:32.340307-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:02:41.753419-08:00","closed_at":"2026-02-08T23:02:41.753419-08:00","close_reason":"5 command dispatch tests: rapid dispatch, mixed valid/invalid, autocomplete perf, registration while dispatching","labels":["commands","stress"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-aog1","depends_on_id":"the-tavern-at-the-spillway-58x7","type":"parent-child","created_at":"2026-02-08T22:34:32.342761-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-ate","title":"Test dep","status":"closed","priority":4,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:58:43.288406-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T22:59:29.57559-08:00","closed_at":"2026-02-05T22:59:29.57559-08:00","close_reason":"test bead"}
{"id":"the-tavern-at-the-spillway-azu","title":"Tavern Feature Backlog — Mined from Transcripts \u0026 Sessions","description":"Comprehensive backlog mined from all 29 seed-design transcripts, session logs, PRD, implementation plan, project status, open questions, and code TODOs. EVERY ITEM IN THIS EPIC IS A STARTING POINT FOR DISCUSSION WITH THE USER — not a final, clearly defined task. Each bead captures the raw material and source references. Discuss with the user before promoting any item to a real work item.","design":"Items extracted from: reader_2026-02-05.md (synthesized transcripts), prd_2026-01-19.md, v1-implementation-plan.md, project-status.md, notes_issues-to-plan-for_2026-01-19-1031.md, code TODOs, handoff-apostrophe-bug.md. Grouped by functional area.","acceptance_criteria":"All identified potential work items captured. Each one references source material. User has reviewed and triaged.","status":"open","priority":2,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:57:53.711069-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T22:57:53.711069-08:00","labels":["backlog","tavern","triage"]}
{"id":"the-tavern-at-the-spillway-azy","title":"Formal spec pipeline — incremental document propagation","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work. Build a formal specification pipeline: transcripts -\u003e PRD -\u003e specs -\u003e ADRs -\u003e code -\u003e tests -\u003e docs. Each downstream artifact derives from upstream, with incremental updates when upstream changes and completeness verification at each stage. Sources: formal-spec session (Feb 6). Key questions: What tooling drives the pipeline? Manual slash commands or automated? How is completeness verified? How do we track which upstream changes have propagated? Is this a dev-time tool or part of the Tavern app itself?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-06T17:54:58.04819-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-06T17:54:58.04819-08:00","labels":["process","tavern","tooling"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-azy","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-06T17:54:58.05285-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-b43","title":"Graceful stream interruption handling","description":"Handle stream interruptions (network errors, user cancellation, timeout) gracefully. Show partial content received so far with error indicator.","acceptance_criteria":"Interrupted streams show partial content. Error state visible. No UI corruption. User can send new messages after interruption.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:56.495932-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:14.766926-08:00","closed_at":"2026-02-08T18:33:14.766926-08:00","close_reason":"Implemented in commit fcd7dad on feature/streaming","labels":["error-handling","streaming","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-b43","depends_on_id":"the-tavern-at-the-spillway-jhm","type":"parent-child","created_at":"2026-02-07T19:44:56.501997-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-bf0","title":"GAP-04: Fix CommitmentVerifier thread pool blocking","description":"CommitmentVerifier.swift:116 uses process.waitUntilExit() which blocks a cooperative thread pool thread. With many concurrent commitment verifications this could exhaust the pool. Violates the project rule: never block the cooperative thread pool.","design":"Replace waitUntilExit() with Process.terminationHandler callback. Use withCheckedThrowingContinuation to bridge the callback to async/await.","acceptance_criteria":"ShellAssertionRunner uses terminationHandler instead of waitUntilExit. No thread pool threads are blocked during verification. Timeout handling still works. All CommitmentTests pass.","status":"closed","priority":2,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:01.633863-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:00:27.283616-08:00","closed_at":"2026-02-08T23:00:27.283616-08:00","close_reason":"Both children complete: waitUntilExit replaced with terminationHandler, concurrent stress test added. All 525 Grade 1+2 tests pass.","labels":["commitments","concurrency","gap-analysis"]}
{"id":"the-tavern-at-the-spillway-bly","title":"Fish-or-cut-bait — kill and restart triggers for agents","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nTriggers to kill and restart rather than continue: token budget exceeded, changeset is totally wrong, agent spinning, whole gang going down wrong path. Reap and restart cleanly.\n\nSources: PRD section 12 (Fish or Cut Bait), PRD section 4.2 (Failed/Reaped state).\n\nKey questions: Who decides to fish-or-cut-bait — parent, Jake, or user? Automatic detection of spinning? What does restart look like — same assignment fresh context? How does this relate to agent hierarchy (reap subtree vs individual)?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:05.01916-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:05.01916-08:00","labels":["agents","lifecycle","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-bly","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:25.782421-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-bq8","title":"Update CLAUDE.md and architecture docs re: sidecar pattern","description":"Update CLAUDE.md Core Patterns section, architecture-v1.md, and any ADR references to accurately describe the current concurrency model: agents use async/await with serial DispatchQueues for state protection, no separate sidecar actors. If sidecar is planned for future, mark it as such.","acceptance_criteria":"All architecture documentation accurately reflects the codebase. No documentation claims features that don't exist.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:37.684922-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:53:25.073804-08:00","closed_at":"2026-02-08T22:53:25.073804-08:00","close_reason":"Updated CLAUDE.md: removed Sidecar from layer structure, replaced Sidecar Pattern core pattern with Async/Await for I/O, updated concurrency rules. architecture-v1.md had no sidecar references.","labels":["architecture","docs"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-bq8","depends_on_id":"the-tavern-at-the-spillway-5hg","type":"parent-child","created_at":"2026-02-08T22:33:37.687086-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-bsa","title":"GAP-07: Extract duplicated command utilities","description":"formatTokens() is copy-pasted in 5 command files. makeBar() is duplicated in 2. Changes require updating all copies. Violates DRY.","acceptance_criteria":"formatTokens() and makeBar() exist in one shared location. All 5+2 command files use the shared version. All CoreCommandTests pass.","status":"closed","priority":3,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:23.197325-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:58:56.644248-08:00","closed_at":"2026-02-08T22:58:56.644248-08:00","close_reason":"Both children (syt, qgy) complete. Extraction done, tests added.","labels":["cleanup","commands","gap-analysis"]}
{"id":"the-tavern-at-the-spillway-bwy","title":"Always allow per tool type (persisted)","description":"Allow users to mark a tool type as 'always allow' from the approval dialog. Persisted to disk so it survives app restart.","acceptance_criteria":"Always Allow option in approval dialog. Persisted across sessions. Tool calls auto-approved for always-allowed tools.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:16.976752-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:11.161942-08:00","closed_at":"2026-02-08T18:09:11.161942-08:00","close_reason":"Implemented in commit ddb51a9 on feature/permissions","labels":["permissions","persistence","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-bwy","depends_on_id":"the-tavern-at-the-spillway-m3o","type":"parent-child","created_at":"2026-02-07T19:45:16.978788-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-byq","title":"/cost — token usage stats","description":"Implement /cost command showing token usage statistics: input tokens, output tokens, total cost, cache hits.","acceptance_criteria":"/cost displays accurate token usage and cost data. Format clear and readable.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:37.579014-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:13:58.386538-08:00","closed_at":"2026-02-08T18:13:58.386538-08:00","close_reason":"Implemented in commit a279429 on feature/slash-commands","labels":["commands","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-byq","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"parent-child","created_at":"2026-02-07T19:45:37.580962-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-c2r","title":"GAP-05: Remove debug file logging from production code","description":"ChatViewModel.swift (~line 161-177) writes to /tmp/tavern_chat_debug.log during session history loading. This is production code with no #if DEBUG guard, blocks the main thread with file I/O, and grows unbounded.","acceptance_criteria":"Debug logging removed or guarded behind #if DEBUG. No file I/O on the main thread during history loading.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:04.423805-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:57:19.118582-08:00","closed_at":"2026-02-08T22:57:19.118582-08:00","close_reason":"Child bead nkl completed via persistence worktree GAP-06 refactor","labels":["chat","cleanup","gap-analysis"]}
{"id":"the-tavern-at-the-spillway-c8s","title":"Workflow engine — state machine templates and composable workflows","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nWorkflow = state machine. Engine helps agents work step by step. Starter templates: Rule of 5 (five agent passes over single output), Verification Layers (progressive gates: lint, structure, architecture, performance). User can modify. Agents can propose new templates.\n\nSources: PRD sections 10 (Workflows), reader section 7 (Workflow Engine), reader open question ?2 (Deterministic Shell Meaning).\n\nKey questions: What is the workflow DSL/format? How do workflows compose? What is the state machine representation? How do verification layers gate progression? Template storage location?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:23.030078-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:23.030078-08:00","labels":["architecture","tavern","workflow"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-c8s","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:26.045854-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-cgv","title":"Epic 3: Input Enhancement","description":"Chat input matches CLI input capabilities. Multi-line input and @ file mentions.","design":"Multi-line text editor: Enter sends, Shift+Enter inserts newline. @ file mention system with path autocomplete popup.","acceptance_criteria":"Multi-line input works with correct key bindings. @ mentions trigger path autocomplete. Selected file paths inserted correctly.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:43:24.46617-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T19:00:24.856698-08:00","closed_at":"2026-02-08T19:00:24.856698-08:00","close_reason":"All children completed","labels":["chat","input","v1"]}
{"id":"the-tavern-at-the-spillway-cli","title":"Agent sidebar status (idle/working/error)","description":"Agent list sidebar shows real-time status for each agent: idle, working (with activity indicator), or error state.","acceptance_criteria":"Each agent in sidebar shows current status. Status updates in real-time. Error state visually distinct.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:46:08.686227-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:57:43.712919-08:00","closed_at":"2026-02-08T18:57:43.712919-08:00","close_reason":"Implemented in commit 482e715 on feature/chat-polish","labels":["agents","chat","polish","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-cli","depends_on_id":"the-tavern-at-the-spillway-vpv","type":"parent-child","created_at":"2026-02-07T19:46:08.688736-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-clt","title":"Metrics and telemetry — token time, utilization, saturation, amplification","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nTime categories: token time (waiting for LLM), tool time (execution), wall clock (total), throttle time (excluded). Agent metrics: utilization, saturation, wait time. Human metrics: wait time, context switching load. Primary measure: amplification (saturated agents running concurrently).\n\nSources: PRD section 9 (Metrics).\n\nKey questions: Where are metrics stored? Real-time dashboard or post-hoc analysis? How does amplification factor display in UI? Per-session or per-project metrics? Baselines and alerting?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:04.635957-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:04.635957-08:00","labels":["metrics","observability","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-clt","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:25.52061-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-coj","title":"Composable tile view system — tiles, layout mutation, view modes","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nThe view layer should be a composable surface reshaped by both user AND agents. Tiles within windows, view modes (like Finder list/icon/column views), multiple views of same agent, dead agent bodies (tiles persist for review), saved layouts (templates vs snapshots).\n\nSources: reader section 8 (Dynamic View Architecture), transcript_2026-01-21-2345, transcript_2026-01-22-0730-view-architecture, project-status.md Dynamic View Architecture Remaining.\n\nKey questions: What tile primitives exist? How does split/merge work? What SwiftUI layout patterns? How do agents propose vs mutate layouts (two permission levels)? What does tree folding look like?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:27.752253-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:27.752253-08:00","labels":["tavern","ui","views"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-coj","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:24.496135-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-cu8","title":"Running cost/token display (persistent)","description":"Persistent cost and token counter visible in toolbar or status bar area. Updates after each message exchange. Shows session total.","acceptance_criteria":"Cost/token counter always visible. Updates in real-time. Shows accurate session totals.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:46:08.369724-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:57:43.954898-08:00","closed_at":"2026-02-08T18:57:43.954898-08:00","close_reason":"Implemented in commit 482e715 on feature/chat-polish","labels":["chat","polish","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-cu8","depends_on_id":"the-tavern-at-the-spillway-vpv","type":"parent-child","created_at":"2026-02-07T19:46:08.371749-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-cvk","title":"/mcp — add server management (add/remove/reconnect)","description":"The /mcp command currently only displays MCP server configuration (read-only) with hardcoded status placeholders. Add ability to: query real runtime connection status, add new MCP servers, remove existing servers, and trigger reconnection. MCPCommand.swift needs substantial expansion.","acceptance_criteria":"Users can add/remove MCP servers, see real connection status (connected/disconnected/error), and trigger reconnect from the /mcp UI. Changes persist to .claude/mcp.json.","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:31:48.102949-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:31:48.102949-08:00","labels":["management","mcp","ui"]}
{"id":"the-tavern-at-the-spillway-cxg","title":"Epic 5: Slash Command Infrastructure + Core Commands","description":"Slash command system with essential commands. Two parts: infrastructure (parser/dispatcher/autocomplete) and core commands (/compact, /cost, /model, /status, /context, /stats, thinking tokens control).","design":"Command parser dispatches from input field. Autocomplete overlay shows matching commands. Core commands call SDK where needed (/compact, /model, thinking tokens). /cost and /stats render usage data. /status shows version/model/connectivity.","acceptance_criteria":"Typing / shows command autocomplete. All core commands functional. /model changes model mid-session. /compact triggers context compaction. /cost shows token usage.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:43:34.251908-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:16:29.627046-08:00","closed_at":"2026-02-08T18:16:29.627046-08:00","close_reason":"All children completed","labels":["commands","infrastructure","v1"]}
{"id":"the-tavern-at-the-spillway-cyi","title":"Collapsible tool use blocks","description":"Tool use blocks show tool name + summary header. Clicking expands to show full input parameters. Collapsed by default for long inputs.","acceptance_criteria":"Tool use blocks show name and summary when collapsed. Expand/collapse toggle works. Full input visible when expanded.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:51.059185-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:09.485982-08:00","closed_at":"2026-02-08T18:09:09.485982-08:00","close_reason":"Implemented in commit e82541e on feature/message-rendering","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-cyi","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"parent-child","created_at":"2026-02-07T19:44:51.06121-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-dd4","title":"Real commitment verification — replace mock assertions","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nCommitment verification currently uses mock runners. Need real deterministic verification: test suite passes, lint passes, code structure checks, etc. PRD invariant 3: Commitments must be verified independently.\n\nSources: CLAUDE.md Not Implemented, project-status.md Commitments Remaining, PRD section 4.7 (Deterministic Shell, Commitment flow), reader open question ?4 (Agent Done Assertion).\n\nKey questions: What does a real assertion look like? Shell commands? Swift test runner? How does agent-says-done verification work with real tooling? Is verification synchronous or async? Who decides the assertion — parent, agent, or user?","status":"closed","priority":1,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:59:29.916085-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:35:54.081387-08:00","closed_at":"2026-02-08T18:35:54.081387-08:00","close_reason":"Implemented in commit 163d84d on feature/core-infra","labels":["core","tavern","verification"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-dd4","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:23.256321-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-dec","title":"ClodKit SDK migration — merge rename from ClodeMonster","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work. The new-sdk branch (commit 6cac0f8) has a clean 1:1 rename from ClodeMonster to ClodKit across 13 files (52 insertions, 52 deletions). Needs merge to main + documentation updates in CLAUDE.md. Sources: new-sdk branch. Key questions: Is the ClodKit package published and stable? Any behavioral changes beyond the rename? Should we verify API compatibility before merging? Update all CLAUDE.md references to ClodKit?","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-06T17:54:59.810222-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T17:48:11.674046-08:00","closed_at":"2026-02-08T17:48:11.674046-08:00","close_reason":"Already completed — commit 6cfc87d switched to ClodKit v1.0.0 across all files. Package.swift references published v1.0.0. CLAUDE.md updated.","labels":["migration","sdk","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-dec","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-06T17:54:59.812399-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-dow","title":"Instrument non-compliant views: AgentListView, FileContentView, FileTreeView","description":"These 3 views have ZERO instrumentation. Add all 5 required logging categories per gui-instrumentation-guide.md: body evaluation with state, conditional branches, .onAppear/.onDisappear, .task with UUID correlation, .onChange for state properties.","acceptance_criteria":"Each view logs body evaluation, lifecycle events, and state changes. AgentListView logs editingDescriptionForAgentId changes. FileTreeView logs expand/collapse. FileContentView logs file selection.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:39.426388-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:54:19.10726-08:00","closed_at":"2026-02-08T22:54:19.10726-08:00","close_reason":"All 5 instrumentation requirements added to AgentListView, FileContentView, FileTreeView. Build passes.","labels":["instrumentation","views"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-dow","depends_on_id":"the-tavern-at-the-spillway-7us","type":"parent-child","created_at":"2026-02-08T22:32:39.428365-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-drq","title":"/hooks — add editing capability for lifecycle hooks","description":"The /hooks command currently only displays hook configuration (read-only). Add ability to add, remove, enable/disable, and edit hook commands through the UI. Requires interactive editing interface or inline editing controls in HooksCommand.swift.","acceptance_criteria":"Users can add new hooks, remove existing hooks, enable/disable hooks, and edit hook commands from the /hooks UI. Changes persist to .claude/hooks.json.","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:31:47.934196-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:31:47.934196-08:00","labels":["hooks","management","ui"]}
{"id":"the-tavern-at-the-spillway-dvn","title":"Add concurrent verification stress test","description":"Add a stress test that runs 20+ concurrent commitment verifications to prove the thread pool isn't exhausted. Verify all complete within reasonable time.","acceptance_criteria":"Test spawns 20+ concurrent verifications. All complete. No deadlock or timeout from pool exhaustion.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:01.97436-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:00:25.699511-08:00","closed_at":"2026-02-08T23:00:25.699511-08:00","close_reason":"Added stress test with 25 concurrent verifications. All complete in 0.01s, well under 10s threshold.","labels":["concurrency","stress","testing"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-dvn","depends_on_id":"the-tavern-at-the-spillway-bf0","type":"parent-child","created_at":"2026-02-08T22:33:01.976633-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-e2p","title":"/hooks — view and edit lifecycle hooks","description":"Management UI for lifecycle hooks. View configured hooks, their triggers, and commands. Allow editing hook configuration.","acceptance_criteria":"/hooks opens hook management UI. Shows all configured hooks. Edit capability functional.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:54.367608-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:12.293424-08:00","closed_at":"2026-02-08T18:33:12.293424-08:00","close_reason":"Implemented in commit 9f0ff41 on feature/custom-commands","labels":["commands","management","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-e2p","depends_on_id":"the-tavern-at-the-spillway-2ah","type":"parent-child","created_at":"2026-02-07T19:45:54.369639-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-e4p","title":"Create /trace command — follow a requirement through the pipeline","description":"Build a slash command that takes a requirement ID (e.g. REQ-AGT-003) and traces it through every pipeline stage. Shows: PRD source section → spec text → ADR (if any) → code files → test files → status at each stage. Quick way to answer 'is this requirement fully implemented and tested?' Reads the spec module to find the requirement, extracts its Source field for PRD linkage, checks downstream references for code/test paths, and reports completeness.","acceptance_criteria":"Given any valid REQ-PREFIX-NNN ID, command outputs a trace showing each pipeline stage. Invalid IDs produce a clear error. Works for requirements at any status (specified, implemented, tested, verified). Shows gaps clearly — e.g. 'Code: not found' or 'Tests: none'.","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:01.173444-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-07T18:42:01.173444-08:00","labels":["pipeline","spec","tooling"]}
{"id":"the-tavern-at-the-spillway-egf","title":"Doc store continuous sync — agents live-syncing state to files","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nDoc store CRUD exists but agents dont continuously sync state to their files. Need live sync so doc store remains the single source of truth (PRD invariant 5: if its not in a file, it doesnt exist).\n\nSources: project-status.md Doc Store Remaining, PRD section 4.5 (Doc Store), reader section 7 (Document Store).\n\nKey questions: What triggers a sync — every state change, or batched? How does this interact with the persistence context pattern? What about write conflicts from concurrent agents? SwiftUI observation patterns for doc store changes?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:08.988739-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:08.988739-08:00","labels":["docstore","persistence","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-egf","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:24.244767-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-ejj","title":"Merge queue — coordinated changeset merging","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nAgents queue up their changesets, see whats ahead, refine against predictable target, serialized merges, fewer conflicts.\n\nSources: PRD section 6.5 (Merge Queue), PRD v1 Deferred list.\n\nKey questions: How does this work without git worktrees (changesets are overlay-based)? What is the merge strategy? Conflict resolution — automatic or agent-assisted? Priority ordering in the queue?","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:23.362814-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:23.362814-08:00","labels":["changesets","tavern","workflow"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-ejj","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:26.315089-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-ekq","title":"Add lifecycle and state change logging to partially compliant views","description":"Most views have body evaluation logging but lack .onAppear/.onDisappear and .onChange logging. Add these to: ChatView, CollapsibleBlockView, CodeBlockView, DiffView, MessageRowView, BackgroundTasksView, TodoListView, ResourcePanelView, PermissionSettingsView.","acceptance_criteria":"All 9 views have lifecycle logging and .onChange logging for critical state properties (e.g., selectedTab, isExpanded, isHovered).","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:39.776733-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:01:31.515525-08:00","closed_at":"2026-02-08T23:01:31.515525-08:00","close_reason":"All 9 views have lifecycle logging and .onChange for critical state. Build passes.","labels":["instrumentation","views"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-ekq","depends_on_id":"the-tavern-at-the-spillway-7us","type":"parent-child","created_at":"2026-02-08T22:32:39.779112-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-el4","title":"Fix Jake streaming cancel closure ordering","description":"Jake.swift:256 — move queue.sync { _isCogitating = false } before innerCancel() call in the cancel closure. Verify with existing StreamingTests.","acceptance_criteria":"Cancel closure acquires queue lock before calling innerCancel(). All streaming tests pass.","status":"closed","priority":2,"issue_type":"bug","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:49.113514-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-09T00:17:13.678136-08:00","closed_at":"2026-02-09T00:17:13.678136-08:00","close_reason":"Moved queue.sync state update before innerCancel() in Jake.sendStreaming cancel closure. Build passes.","labels":["agents","concurrency"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-el4","depends_on_id":"the-tavern-at-the-spillway-lmt","type":"parent-child","created_at":"2026-02-08T22:32:49.117873-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-f0lc","title":"Stress test: permission evaluation under concurrent access","description":"Concurrent reads and writes to PermissionStore from 20+ threads. Add/remove rules while evaluating tools simultaneously. Verify no data corruption, no crashes, serial queue provides correct isolation.","acceptance_criteria":"100 concurrent read/write operations complete without corruption. Rules added during evaluation don't cause crashes. Final state is consistent.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:32.511752-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:02:45.55862-08:00","closed_at":"2026-02-08T23:02:45.55862-08:00","close_reason":"4 permission tests: concurrent read/write, evaluation with mutations, mode switching, bulk rule ops","labels":["permissions","stress"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-f0lc","depends_on_id":"the-tavern-at-the-spillway-58x7","type":"parent-child","created_at":"2026-02-08T22:34:32.513769-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-f99","title":"Create /spec-status command — live dashboard of spec module status","description":"Build a slash command that computes a live dashboard from the actual spec files (not manually maintained). For each of the 16 modules: reads the file, extracts status (skeleton/partial/complete/verified), counts requirements by status (specified/implemented/tested/verified), and summarizes. Output is a table showing module → status → requirement counts → implementation coverage. Basically index.md but computed live rather than manually maintained.","acceptance_criteria":"Command reads all 16 spec modules and index.md. Produces accurate counts matching actual file contents. Table format is scannable. Detects drift between index.md status and actual module status. Runs in under 30 seconds.","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:05.119956-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-07T18:42:05.119956-08:00","labels":["pipeline","spec","tooling"]}
{"id":"the-tavern-at-the-spillway-fh0","title":"Custom commands in autocomplete and help","description":"Discovered custom commands appear in slash command autocomplete and help listing alongside built-in commands.","acceptance_criteria":"Custom commands show in autocomplete. Distinguished from built-in commands (e.g., with project/user badge). Help lists all available commands.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:46.968725-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:11.924955-08:00","closed_at":"2026-02-08T18:33:11.924955-08:00","close_reason":"Implemented in commit 9f0ff41 on feature/custom-commands","labels":["commands","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-fh0","depends_on_id":"the-tavern-at-the-spillway-l2q","type":"parent-child","created_at":"2026-02-07T19:45:46.971827-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-fjb","title":"Partial message UI updates","description":"Append tokens to current message in real-time as they arrive from the stream. ChatViewModel updates incrementally.","acceptance_criteria":"Text appears token-by-token in the chat view. No flicker or layout jumps.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:56.124376-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:14.634658-08:00","closed_at":"2026-02-08T18:33:14.634658-08:00","close_reason":"Implemented in commit fcd7dad on feature/streaming","labels":["chat","streaming","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-fjb","depends_on_id":"the-tavern-at-the-spillway-jhm","type":"parent-child","created_at":"2026-02-07T19:44:56.13022-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-flwg","title":"Stress test: TodoList and BackgroundTask bulk operations","description":"Add 1000 TODO items and 100 background tasks. Verify add/toggle/remove operations remain responsive. Bulk clear completes within 1 second. Selection state stays consistent.","acceptance_criteria":"1000 items managed without crashes. Bulk operations complete within time budget. Selection tracking stays accurate throughout.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:33.025883-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:02:49.057421-08:00","closed_at":"2026-02-08T23:02:49.057421-08:00","close_reason":"9 side pane tests: TodoList 1000 items (add/toggle/clear/remove/update), BackgroundTask 100 tasks (lifecycle/selection/guards)","labels":["sidepane","stress"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-flwg","depends_on_id":"the-tavern-at-the-spillway-58x7","type":"parent-child","created_at":"2026-02-08T22:34:33.027877-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-gc8","title":"Add canUseTool callback to LiveMessenger","description":"LiveMessenger needs a canUseTool callback that delegates to PermissionManager.evaluateTool(). When evaluateTool returns nil (prompt user), the callback must suspend and wait for user decision via ToolApprovalRequest.","acceptance_criteria":"LiveMessenger accepts a PermissionManager and checks it before every tool execution. Tests verify callback is invoked.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:20.918332-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:59:33.675871-08:00","closed_at":"2026-02-08T22:59:33.675871-08:00","close_reason":"LiveMessenger accepts PermissionManager + ToolApprovalHandler, wires them into canUseTool callback. Auto-decides or suspends for user input. 526 tests pass.","labels":["messenger","permissions"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-gc8","depends_on_id":"the-tavern-at-the-spillway-mrh","type":"parent-child","created_at":"2026-02-08T22:32:20.920536-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-gfg","title":"Jake system prompt broken — not getting authentic Jake experience","description":"Jake is not responding with his characteristic voice (used car salesman energy, CAPITALS for emphasis, carnival barker theatrics). The system prompt contains a note about avoiding apostrophes due to a ClodeMonster SDK shell escaping bug that caused 60s timeouts. This workaround may still be in place or the prompt itself may not be reaching Claude correctly after the ClodKit migration. Need to verify: (1) the system prompt is actually being sent, (2) the apostrophe bug still exists in ClodKit or was fixed, (3) Jake responds in character.","acceptance_criteria":"When chatting with Jake, responses consistently use his voice: CAPITALS for emphasis, used car salesman energy, parenthetical asides, sketchy-but-warm personality. The authentic Jake experience.","status":"closed","priority":1,"issue_type":"bug","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T20:53:11.850423-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T17:49:06.8133-08:00","closed_at":"2026-02-08T17:49:06.8133-08:00","close_reason":"Restored authentic Jake voice: added apostrophes back (ClodKit v1.0.0 fixed the shell escaping bug), added sample Jake-isms, Spillway Principle, italics for stage directions, richer character direction.","labels":["bug","chat","jake"]}
{"id":"the-tavern-at-the-spillway-gkp","title":"Per-tool progress indicator","description":"Replace global 'cogitating' spinner with per-tool progress. Show which specific tool is executing (e.g., 'Running Bash...', 'Reading file...').","acceptance_criteria":"During tool execution, indicator shows specific tool name. Multiple concurrent tools each shown. Returns to text streaming indicator between tools.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:46:08.520366-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:57:43.833369-08:00","closed_at":"2026-02-08T18:57:43.833369-08:00","close_reason":"Implemented in commit 482e715 on feature/chat-polish","labels":["chat","polish","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-gkp","depends_on_id":"the-tavern-at-the-spillway-vpv","type":"parent-child","created_at":"2026-02-07T19:46:08.522995-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-gyx","title":"Fill spec: spawning.md (REQ-SPN)","description":"Fill docs/2-spec/spawning.md with concrete requirements from PRD §6.2 (Agent Spawn Configuration), §6.3 (Work Queues), §7 (Agent Naming). Cover two-mode spawn, naming themes, work queue management.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:51.820662-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:10.021361-08:00","closed_at":"2026-02-08T18:06:10.021361-08:00","close_reason":"Filled spawning.md with 10 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-gyx","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:42:51.822582-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-gz4","title":"Agent reasoning visibility — why did it do that?","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nVisibility into agent reasoning, not just outputs. Understanding the chain of decisions when an agent goes off the rails. Postmortems are hard without this.\n\nSources: notes_issues-to-plan-for items 2 and 9 (Debugging failed runs, Why did it do that), PRD section 5.4 (Stream separation).\n\nKey questions: Is this just the thinking blocks rendered in UI? Or a separate reasoning trace? How does this work across agent hierarchies? Decision tree visualization? Post-hoc analysis vs real-time?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:41.735761-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:41.735761-08:00","labels":["observability","tavern","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-gz4","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:26.588612-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-gzq","title":"Fill spec: observability.md (REQ-OBS)","description":"Fill docs/2-spec/observability.md with concrete requirements from PRD §9 (Metrics), §16 (Violation Monitoring). Cover TavernLogger categories, instrumentation principles, metrics collection, violation monitoring. Already implemented in Logging/ and Errors/.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:43:10.353678-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:11.956797-08:00","closed_at":"2026-02-08T18:06:11.956797-08:00","close_reason":"Filled observability.md with 11 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-gzq","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:43:10.355505-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-hkg","title":"/model — change model mid-session","description":"Implement /model command to switch the active model mid-session. Also support F1 key for model selection popup. Show available models.","acceptance_criteria":"/model shows available models and allows switching. F1 opens model selector. Model change takes effect on next message.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:37.719095-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:13:58.500834-08:00","closed_at":"2026-02-08T18:13:58.500834-08:00","close_reason":"Implemented in commit a279429 on feature/slash-commands","labels":["commands","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-hkg","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"parent-child","created_at":"2026-02-07T19:45:37.720792-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-hnb","title":"File tree does not refresh when new files appear on disk","description":"The resource panel file tree only loads the directory contents on initial load and on expand/collapse. If files are created or deleted externally (e.g., by an agent, git checkout, or the user in Finder), the tree does not update to reflect the changes. Need file watching (FSEvents or DispatchSource) to detect on-disk changes and refresh the affected subtree.","acceptance_criteria":"When a file is created, deleted, or renamed in a directory that is currently visible in the file tree, the tree updates within ~1 second without requiring manual interaction.","status":"open","priority":2,"issue_type":"bug","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T20:52:55.015626-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-07T20:52:55.015626-08:00","labels":["resource-panel","ux"]}
{"id":"the-tavern-at-the-spillway-hq1","title":"Epic 1: Message Rendering Overhaul","description":"Messages are visually distinct by type, collapsible, and polished. Pure UI work on existing MessageType enum.","design":"Extend existing content block rendering infrastructure. Each message type gets distinct visual treatment (colored boxes/borders/cards). Collapsible sections for tool use, tool results, and thinking blocks. Inline diff rendering for file edits.","acceptance_criteria":"All message types visually distinct. Tool use/result/thinking blocks collapsible. Code blocks have copy button. Timestamps on all messages. Inline diffs render correctly.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:43:17.616912-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:15.741799-08:00","closed_at":"2026-02-08T18:09:15.741799-08:00","close_reason":"All children completed","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-hq1","depends_on_id":"the-tavern-at-the-spillway-an7","type":"relates-to","created_at":"2026-02-07T19:47:11.792579-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-hu4","title":"Notification and attention routing — badges, priority, question triage","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nAgents need attention indicators: notification badges, priority routing (which agent needs user attention NOW), question triage (quick vs deep). Parent agents choose notification approach for children (popup vs periodic summary).\n\nSources: PRD section 5.5 (Question Triage), reader section 3 (Bubbling), project-status.md Chat and UI Remaining (Notification badges), notes_issues-to-plan-for item 4 (Priority/attention routing).\n\nKey questions: How are questions classified as quick vs deep? What determines priority? How does Jake surface which agent to zoom into? Badge count vs badge type?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:27.921718-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:27.921718-08:00","labels":["agents","tavern","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-hu4","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:24.623149-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-igh","title":"Sandbox and changeset system — overlay filesystem, isolation, platforms","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nFive sandbox primitives: Changeset (overlay filesystem), Platform (Mac/container/cloud), Isolation (VM/container/OS sandbox), Outputs (network control), Software (OS choice). Source control is orthogonal to isolation. Changesets work across multiple repos.\n\nSources: reader section 6 (Sandbox and Isolation), PRD section 4.6, reader ?8 (partially resolved), project-status.md Sandbox and Changesets (nothing implemented yet).\n\nKey questions: Which primitive to implement first? How does overlay filesystem work on macOS (APFS snapshots? FUSE?)? Changeset review workflow? How do changesets compose across agents?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:46.510127-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:46.510127-08:00","labels":["architecture","sandbox","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-igh","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:24.993468-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-iktu","title":"Stress test: ChatViewModel message accumulation","description":"Send 500+ messages through ChatViewModel (via MockAgent). Verify UI state stays consistent, token counting remains accurate, scroll-to-bottom behavior doesn't degrade, and memory grows linearly (not quadratically).","acceptance_criteria":"500 messages accumulated without crashes. Token counts accurate. Memory growth is O(n). No UI state corruption.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:32.853447-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:02:47.440453-08:00","closed_at":"2026-02-08T23:02:47.440453-08:00","close_reason":"6 ChatViewModel tests: 500 messages, token accuracy, creation perf, clear after heavy use, rapid input","labels":["chat","stress"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-iktu","depends_on_id":"the-tavern-at-the-spillway-58x7","type":"parent-child","created_at":"2026-02-08T22:34:32.856133-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-iln","title":"Gang of experts — specialized prompt templates for agent roles","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nSpecialized prompts applied to agents (not persistent entities): Reviewer, Tester, Architect, etc. Pull in the reviewer = spawn agent with reviewer instructions. User can customize.\n\nSources: PRD section 11 (Gang of Experts).\n\nKey questions: What expert roles to start with? How are prompts composed (system prompt + expert prompt + assignment)? Can experts be combined? Where are expert templates stored (.tavern/ vs bundled)?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:46.841474-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:46.841474-08:00","labels":["agents","prompts","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-iln","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:25.252827-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-iy1","title":"ClodeMonster SDK apostrophe bug — shell escaping in ProcessTransport","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nApostrophes in --system-prompt cause 60-second timeouts. Root cause: ProcessTransport.swift:171 passes command string to zsh -l -c, breaking shell parsing. Workaround applied: all apostrophes removed from Jakes system prompt.\n\nSources: docs/handoff-apostrophe-bug.md (full reproduction, root cause, fix options).\n\nKey questions: File upstream bug with ClodeMonster? Fix locally? Monitor for SDK update that fixes this? Remove workaround when fixed?","status":"closed","priority":1,"issue_type":"bug","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:42.202214-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T17:48:12.606274-08:00","closed_at":"2026-02-08T17:48:12.606274-08:00","close_reason":"Already resolved — commit f757e6d cleaned up the apostrophe bug documentation. ClodKit v1.0.0 fixes the shell escaping issue.","labels":["bug","sdk","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-iy1","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:26.971237-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-jhm","title":"Epic 2: Streaming Responses","description":"Token-by-token progressive display instead of batch-only. ClodeMonster already exposes AsyncSequence — wire it up.","design":"Integrate SDK streaming via AsyncSequence. Partial message UI updates appending tokens. Visual streaming indicator. Graceful stream interruption handling.","acceptance_criteria":"Responses appear token-by-token. Streaming indicator visible during generation. Interrupted streams handled gracefully without UI corruption.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:43:21.298419-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:38:40.268728-08:00","closed_at":"2026-02-08T18:38:40.268728-08:00","close_reason":"All children completed","labels":["chat","streaming","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-jhm","depends_on_id":"the-tavern-at-the-spillway-7g6","type":"relates-to","created_at":"2026-02-07T19:47:11.652957-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-jiw","title":"Add unit tests for MultiLineTextInput","description":"MultiLineTextInput (208 lines, NSViewRepresentable) has zero unit tests. While XCUITest covers basic behavior, Grade 1-2 tests should cover: height calculation logic, placeholder visibility, text sync between SwiftUI binding and NSTextView, and key event routing (Enter vs Shift+Enter). Use ViewInspector or extract testable logic into a helper.","acceptance_criteria":"At least 8 tests covering: initial state, text binding sync, height growth, height shrink, placeholder shown when empty, placeholder hidden when text present, max height clamping. Test file: MultiLineTextInputTests.swift","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:31.478207-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:31:41.606463-08:00","closed_at":"2026-02-08T23:31:41.606463-08:00","close_reason":"12 tests covering placeholder, intrinsicContentSize, text sync, command handling, and height calculation. All pass.","labels":["coverage-gap","input","testing"]}
{"id":"the-tavern-at-the-spillway-jsd","title":"@ file mentions with path autocomplete","description":"Typing @ in the input field triggers a file path autocomplete popup. Browse and select files from the project directory. Selected file path inserted as context reference.","acceptance_criteria":"@ triggers autocomplete popup. File paths from project listed. Selection inserts path. Autocomplete filters as user types.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:58.991361-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:52:37.387279-08:00","closed_at":"2026-02-08T18:52:37.387279-08:00","close_reason":"Implemented in commit aefcc83 on feature/input-enhancement","labels":["autocomplete","input","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-jsd","depends_on_id":"the-tavern-at-the-spillway-cgv","type":"parent-child","created_at":"2026-02-07T19:44:58.993411-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-kaq","title":"Model selection per agent — Haiku for drones, Sonnet for coordinators, Opus for architects","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nParent specifies model when spawning child. Cheap models for cheap tasks (drones), capable models for complex work. Currently all agents use whatever the SDK defaults to.\n\nSources: PRD section 6.2 (Agent Spawn Configuration - model selection).\n\nKey questions: How does ClodeMonster SDK support model selection? Does model affect token budget? Can model be changed mid-session? What are the cost tradeoffs?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:59.390657-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:59.390657-08:00","labels":["agents","sdk","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-kaq","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:27.103223-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-kvn","title":"/bashes tab — background task list","description":"Background task tab in side pane showing running/completed background tasks with status. View output and stop running tasks.","acceptance_criteria":"Background task tab shows all tasks with status (running/completed/failed). Can view output. Can stop running tasks.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:58.659452-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:52:37.519799-08:00","closed_at":"2026-02-08T18:52:37.519799-08:00","close_reason":"Implemented in commit 6d7ff63 on feature/side-pane","labels":["side-pane","tasks","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-kvn","depends_on_id":"the-tavern-at-the-spillway-6ts","type":"parent-child","created_at":"2026-02-07T19:45:58.661367-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-kwo","title":"Subdirectory namespacing for custom commands","description":"Subdirectories in commands/ become namespaces. E.g., .claude/commands/git/amend.md becomes /git:amend.","acceptance_criteria":"Subdirectory commands registered with namespace prefix. Autocomplete shows namespaced commands.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:46.664751-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:33:12.046367-08:00","closed_at":"2026-02-08T18:33:12.046367-08:00","close_reason":"Implemented in commit 9f0ff41 on feature/custom-commands","labels":["commands","customization","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-kwo","depends_on_id":"the-tavern-at-the-spillway-l2q","type":"parent-child","created_at":"2026-02-07T19:45:46.666816-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-kxw","title":"Fill spec: sandbox.md (REQ-SBX)","description":"Fill docs/2-spec/sandbox.md with concrete requirements from PRD §4.6 (Sandbox Primitives), §6.4 (Preflight Checks). Cover changeset vs worktrees, file protection, preflight checks. Not yet implemented — spec drives future work.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:51.346246-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:13.384504-08:00","closed_at":"2026-02-08T18:06:13.384504-08:00","close_reason":"Filled sandbox.md with 8 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-kxw","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:42:51.348603-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-l2q","title":"Epic 6: Custom Slash Commands","description":"User and project custom commands work like the CLI. Discover .claude/commands/*.md, subdirectory namespacing, argument substitution.","design":"Scan .claude/commands/ (project) and ~/.claude/commands/ (user) for .md files. Parse command names from filenames, subdirectories become namespaces. Substitute $ARGUMENTS, $1, $2 etc. Register in autocomplete.","acceptance_criteria":"Project and user commands discovered and listed. Subdirectory namespacing works. Argument substitution functional. Commands appear in autocomplete.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:43:38.611286-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:29:29.093938-08:00","closed_at":"2026-02-08T18:29:29.093938-08:00","close_reason":"All children completed","labels":["commands","customization","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-l2q","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"blocks","created_at":"2026-02-07T19:44:18.582719-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-l6g","title":"Session classification automation — design vs transcription vs implementation","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work. Create decision logic to automatically classify Claude sessions into categories: (a) design sessions with [U]/[C]/[T] exchanges that need transcripts, (b) transcription/meta sessions doing process work, (c) implementation sessions where commits suffice. Could use message frequency analysis, keyword detection, or other heuristics. Sources: transcript_2026-02-02 (Part 3, Transcription vs Design Sessions). Key questions: Is this a standalone tool or part of the audit system? What accuracy is acceptable? ML-based or heuristic? Does this feed into the formal spec pipeline? How does it handle sessions that span multiple categories?","status":"open","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-06T17:55:06.535613-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-06T17:55:06.535613-08:00","labels":["process","tavern","tooling"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-l6g","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-06T17:55:06.537978-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-lmt","title":"GAP-03: Fix streaming cancellation race condition","description":"Jake.swift:256 and Servitor.swift:254 have a race where the cancel closure calls innerCancel() outside the serial queue while the stream completion handler concurrently writes _isCogitating inside the queue. Both write false, so no data corruption, but violates the documented invariant that all _isCogitating access goes through the queue.","design":"Move queue.sync before innerCancel() in both cancel closures. Ensure stream completion handler and cancel closure cannot interleave writes.","acceptance_criteria":"All _isCogitating writes go through the serial queue. Cancel and completion cannot race. Existing streaming tests still pass.","status":"closed","priority":2,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:48.93849-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-09T00:23:49.116069-08:00","closed_at":"2026-02-09T00:23:49.116069-08:00","close_reason":"All 3 child beads complete (el4, 0kr, wmh). Streaming cancel closure ordering fixed in both Jake and Servitor. 6 regression tests verify state consistency.","labels":["agents","concurrency","gap-analysis"]}
{"id":"the-tavern-at-the-spillway-lz6","title":"Fill spec: doc-store.md (REQ-DOC)","description":"Fill docs/2-spec/doc-store.md with concrete requirements from PRD §4.5 (The Document Store), §6.6 (Hygiene). Cover three storage layers, session lifecycle, doc store as memory backbone.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:41.912052-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:09.69123-08:00","closed_at":"2026-02-08T18:06:09.69123-08:00","close_reason":"Filled doc-store.md with 8 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-lz6","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:42:41.914115-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-m20","title":"Move ClaudeNativeSessionStorage parsing to background","description":"ClaudeNativeSessionStorage.getMessages() (line ~165) does String(data:encoding:)?.components(separatedBy:) on the calling thread. Wrap the parsing in Task.detached or move the call site in ChatViewModel.loadSessionHistory() to use Task.detached { await ... }.value.","acceptance_criteria":"JSONL parsing runs on a background thread. Main thread is never blocked by history loading. Existing history loading tests pass.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:15.774909-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:55:14.959963-08:00","closed_at":"2026-02-08T22:55:14.959963-08:00","close_reason":"JSONL parsing moved to Task.detached in ClaudeNativeSessionStorage.parseSessionFile() via static parseJSONLData(). ChatViewModel.loadSessionHistory() offloads message conversion via static convertStoredMessages(). Removed leftover /tmp debug logging.","labels":["performance","persistence"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-m20","depends_on_id":"the-tavern-at-the-spillway-x8t","type":"parent-child","created_at":"2026-02-08T22:33:15.776879-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-m3o","title":"Epic 4: Permissions Subsystem","description":"Full permission control over tool execution, matching CLI behavior. Tool approval dialogs, always-allow rules, permission modes.","design":"Permission callback integration via SDK canUseTool. Tool approval dialog UI. Persisted allow rules per tool type. Permission mode switching (default, acceptEdits, plan, bypassPermissions, dontAsk).","acceptance_criteria":"Tool calls prompt for approval. Always-allow persists across sessions. All permission modes functional. Rules viewable and editable in UI.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:43:29.324807-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:15.742915-08:00","closed_at":"2026-02-08T18:09:15.742915-08:00","close_reason":"All children completed","labels":["permissions","sdk","v1"]}
{"id":"the-tavern-at-the-spillway-md1","title":"GAP-10: Remove dead code and unused declarations","description":"Three pieces of dead code identified: unused DispatchQueue in PermissionManager.swift:18, CommandContext.recordUsage() never called, ClaudeSessionProtocol with single conformer.","acceptance_criteria":"All dead code removed. No functionality changes. All tests pass.","status":"closed","priority":3,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:42.432696-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:00:55.701148-08:00","closed_at":"2026-02-08T23:00:55.701148-08:00","close_reason":"All dead code addressed. Child bead 04e complete.","labels":["cleanup","gap-analysis"]}
{"id":"the-tavern-at-the-spillway-mrh","title":"GAP-01: Wire permissions subsystem to tool execution","description":"The permissions subsystem (PermissionManager, PermissionStore, 59 tests) exists but is not connected to anything. Tool execution in agents bypasses all permission checks. This is the single biggest functional gap — a security boundary that provides zero protection.","design":"Integrate PermissionManager.evaluateTool() into the SDK's canUseTool callback in LiveMessenger. ToolApprovalView surfaces prompts. PermissionSettingsView already works.","acceptance_criteria":"Tool execution checks permissions. Bypass mode allows all. Plan mode denies all. DontAsk mode auto-denies unmatched. Normal mode prompts user. Always-allow rules bypass prompts. All modes verified by tests.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:20.755812-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:15:33.270195-08:00","closed_at":"2026-02-08T23:15:33.270195-08:00","close_reason":"All 4 child beads complete (gc8, v7k, oax, 60s). Permission subsystem wired from PermissionManager through construction chain to LiveMessenger canUseTool callback, with ToolApprovalView connected and 20 integration tests passing.","labels":["gap-analysis","permissions","security"]}
{"id":"the-tavern-at-the-spillway-my4","title":"Resource panel / file viewer — IDE-lite right-side panel","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work. Right-side panel showing file tree, file contents, and diffs alongside chat. Goal: make Tavern usable as a standalone dev environment at v1.5 without needing a separate IDE. Sources: resource-viewer session (Feb 6). Key questions: What file types need rendering? Syntax highlighting approach? How do agent file changes surface in the panel? Read-only or editable? How does this interact with the doc store / shared workspace pattern?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-06T17:54:48.855853-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-06T17:54:48.855853-08:00","labels":["tavern","ui","v1.5"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-my4","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-06T17:54:48.861718-08:00","created_by":"Yaakov M Nemoy"},{"issue_id":"the-tavern-at-the-spillway-my4","depends_on_id":"the-tavern-at-the-spillway-6ts","type":"relates-to","created_at":"2026-02-07T19:47:12.065672-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-n1r","title":"GAP-12: Replace ChatViewModel boolean state with single enum","description":"ChatViewModel uses multiple booleans (isCogitating, isStreaming, currentToolName) that create intermediate states and potential UI flicker. A single enum would be cleaner and prevent impossible states.","design":"Replace with: enum AgentActivity { case idle, cogitating(verb: String), streaming, toolRunning(name: String, startTime: Date) }. Derive existing published properties from the enum for backwards compatibility.","acceptance_criteria":"Single source of truth for agent activity state. No intermediate states possible. All ChatViewModel tests pass. UI behavior unchanged.","status":"closed","priority":3,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:59.677763-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:58:45.45251-08:00","closed_at":"2026-02-08T22:58:45.45251-08:00","close_reason":"Epic complete: child qye closed. ChatViewModel state booleans replaced with AgentActivity enum.","labels":["chat","gap-analysis","refactor"]}
{"id":"the-tavern-at-the-spillway-nkl","title":"Remove or DEBUG-guard /tmp/tavern_chat_debug.log writing","description":"ChatViewModel.swift writes debug output to /tmp/tavern_chat_debug.log unconditionally during loadSessionHistory(). Either remove entirely or wrap in #if DEBUG. Use TavernLogger.chat.debug() for any diagnostic info worth keeping.","acceptance_criteria":"No file writes to /tmp in production builds. Diagnostic info (if needed) routed through TavernLogger.","status":"closed","priority":1,"issue_type":"bug","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:04.611842-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:57:17.689086-08:00","closed_at":"2026-02-08T22:57:17.689086-08:00","close_reason":"Debug logging removed as part of GAP-06 persistence refactor (commit 015b7fb)","labels":["chat","cleanup"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-nkl","depends_on_id":"the-tavern-at-the-spillway-c2r","type":"parent-child","created_at":"2026-02-08T22:33:04.614083-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-no9","title":"Permission mode switching","description":"Support permission modes: default (ask for each), acceptEdits (auto-allow edits), plan (require plan approval), bypassPermissions (allow all). Switchable via UI or command.","acceptance_criteria":"All four permission modes functional. Mode switching works. Each mode correctly controls tool approval behavior.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:17.12164-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:11.052814-08:00","closed_at":"2026-02-08T18:09:11.052814-08:00","close_reason":"Implemented in commit ddb51a9 on feature/permissions","labels":["permissions","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-no9","depends_on_id":"the-tavern-at-the-spillway-m3o","type":"parent-child","created_at":"2026-02-07T19:45:17.123551-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-nt2","title":"Rollback mechanism — undoing agent work cleanly","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nUndoing agent work that looked fine but wasnt. Git helps but isnt always clean. Especially important when agents work on actual files (pre-changeset).\n\nSources: notes_issues-to-plan-for item 8 (Rollback).\n\nKey questions: Git-based rollback vs custom undo? Per-agent commits? How does this interact with changesets when they exist? Rollback across multiple agents that collaborated?","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:02:12.542559-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:02:12.542559-08:00","labels":["safety","tavern","workflow"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-nt2","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:27.596091-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-o0w","title":".tavern/ in-project shareable configuration","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nProjects should have a .tavern/ directory for shareable config: templates, agent definitions, workflow configs. This is version-controllable and separate from personal state (UserDefaults/iCloud).\n\nSources: reader section 7 (Session Storage Layers - layer 2), project-status.md Document-Based Architecture Remaining, PRD section 4.5.\n\nKey questions: What goes in .tavern/ vs UserDefaults? Config file format (YAML, JSON, TOML)? Agent definition format? Template structure? Should this be gitignored or committed?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:28.274424-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:28.274424-08:00","labels":["config","persistence","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-o0w","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:24.872015-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-o52","title":"Coordinate with file viewer pane infrastructure","description":"Coordinate with the other agent building file viewer side pane infrastructure. Ensure tab/section system supports adding TODO and background task tabs.","acceptance_criteria":"Side pane infrastructure supports multiple content tabs. API for adding custom tabs is clear.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:58.339136-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:52:37.801242-08:00","closed_at":"2026-02-08T18:52:37.801242-08:00","close_reason":"Implemented in commit 6d7ff63 on feature/side-pane","labels":["coordination","side-pane","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-o52","depends_on_id":"the-tavern-at-the-spillway-6ts","type":"parent-child","created_at":"2026-02-07T19:45:58.341294-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-oax","title":"Connect ToolApprovalView to async permission decisions","description":"When PermissionManager returns nil (prompt user), ChatViewModel must present ToolApprovalView and relay the user's decision back to the suspended canUseTool callback. Likely uses async continuation.","acceptance_criteria":"Tool requiring approval shows ToolApprovalView. Allow proceeds. Deny blocks. Always-allow persists rule and proceeds. UI dismisses after decision.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:21.276945-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:03:57.744637-08:00","closed_at":"2026-02-08T23:03:57.744637-08:00","close_reason":"ChatViewModel surfaces ToolApprovalRequest via published property, resumes async continuation on user response. ChatView presents ToolApprovalView as sheet. All 526 tests pass.","labels":["chat","permissions","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-oax","depends_on_id":"the-tavern-at-the-spillway-mrh","type":"parent-child","created_at":"2026-02-08T22:32:21.279333-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-ogs","title":"Context cards — quick context for jumping into agent conversations","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nQuick context cards for jumping into agent conversations: agent name, current assignment, status right now. Lets user switch contexts without reading full chat history.\n\nSources: reader section 8 (Context Cards), PRD section 5.2.\n\nKey questions: What exactly is shown? Just name/assignment/status or more? Is it a hover card, a sidebar panel, or inline in the agent list? Does it include recent messages summary?","status":"open","priority":3,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:28.100529-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:28.100529-08:00","labels":["tavern","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-ogs","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:24.748831-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-p37","title":"/context — context usage visualization","description":"Implement /context showing context window usage — tokens used vs available, visual bar/gauge, breakdown by content type.","acceptance_criteria":"/context shows context usage with visual representation. Breakdown by type (system, messages, tools) if available.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:37.997567-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:13:58.717728-08:00","closed_at":"2026-02-08T18:13:58.717728-08:00","close_reason":"Implemented in commit a279429 on feature/slash-commands","labels":["commands","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-p37","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"parent-child","created_at":"2026-02-07T19:45:37.999575-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-p70","title":"Jake autonomous agent spawning via tool handler","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nJake currently responds in JSON format with spawn actions parsed by JSONActionHandler, but spawned agents use mock Claude (not real SDK calls). Need real Claude sessions for spawned agents so Jake can truly delegate work.\n\nSources: project-status.md Jake Remaining, CLAUDE.md Not Implemented (Real Claude for spawned agents), transcript_2026-01-28-jake-spawn-tool (JakeToolHandler protocol, continuation loop), reader section 3 (Two-Level Orchestration Model).\n\nKey questions: How does the real SDK session interact with the sidecar pattern? Token budget for spawned agents? What happens when spawned agent session times out or errors?","status":"closed","priority":1,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:59:29.752322-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:35:54.194712-08:00","closed_at":"2026-02-08T18:35:54.194712-08:00","close_reason":"Implemented in commit 163d84d on feature/core-infra","labels":["agents","core","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-p70","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:23.122146-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-pbt","title":"Perseverance mode and agent lifecycle states","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nWhen agents stop, the system should auto-prompt them to continue (perseverance mode). Agents must explicitly use a tool to get user attention. Need full lifecycle state machine: Working, Waiting for Input, Waiting for Wakeup, Done, Failed/Reaped.\n\nSources: PRD section 4.2 (Agent States), PRD section 4.4 (Operating Modes), reader section 3 (Perseverance Mode vs Chat Mode), reader open question ?6 (Perseverance Prompts and Agent Lifecycle), project-status.md Agent Spawning Remaining.\n\nKey questions: What is a perseverance prompt exactly? What triggers transitions? How does this interact with token budgets? What is the wakeup mechanism?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:59:50.114999-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T22:59:50.114999-08:00","labels":["agents","lifecycle","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-pbt","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:23.516486-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-phg","title":"Fill spec: agents.md (REQ-AGT)","description":"Fill docs/2-spec/agents.md with concrete requirements from PRD §4.1 (Agent Types), §4.2 (Agent States), §4.3 (Task Modes). Cover Jake daemon, mortal agents, sidecar pattern, two-level orchestration.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:41.608032-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:09.474796-08:00","closed_at":"2026-02-08T18:06:09.474796-08:00","close_reason":"Filled agents.md with 10 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-phg","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:42:41.609839-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-pl9","title":"Fill spec: system-architecture.md (REQ-ARCH)","description":"Fill docs/2-spec/system-architecture.md with concrete requirements from PRD §6.1 (Tech Stack). Cover layer structure, component ownership chain, async primitives, concurrency rules. Reference ADR-001.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:43:01.5036-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:12.358816-08:00","closed_at":"2026-02-08T18:06:12.358816-08:00","close_reason":"Filled system-architecture.md with 10 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-pl9","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:43:01.505796-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-pt3","title":"Web search result rendering","description":"Minimal rendering for web search results: show query text + clickable source links.","acceptance_criteria":"Web search results show query and source links. Links are clickable.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:51.750757-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:10.051648-08:00","closed_at":"2026-02-08T18:09:10.051648-08:00","close_reason":"Implemented in commit e82541e on feature/message-rendering","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-pt3","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"parent-child","created_at":"2026-02-07T19:44:51.752789-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-qgy","title":"Add edge case tests for formatting utilities","description":"Add tests for the extracted formatTokens (0, 999, 1000, 999999, 1000000) and makeBar (0%, 50%, 100%, negative, \u003e100%) to the shared location.","acceptance_criteria":"Tests cover boundary values and edge cases for both utilities.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:23.553252-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:58:56.518797-08:00","closed_at":"2026-02-08T22:58:56.518797-08:00","close_reason":"12 edge case tests for formatTokens and makeBar. All pass.","labels":["cleanup","testing"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-qgy","depends_on_id":"the-tavern-at-the-spillway-bsa","type":"parent-child","created_at":"2026-02-08T22:33:23.555172-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-qn7","title":"GAP-08: Replace AnyAgent type-erasure with existentials","description":"AnyAgent (Agent.swift:51-83) wraps agents via closure-based type erasure, but there are only 2 conformers (Jake, Servitor), both known at compile time. Project uses closed plugin set — no dynamic loading. Modern Swift existentials (any Agent) would be simpler.","acceptance_criteria":"AnyAgent class removed. AgentRegistry and all consumers use 'any Agent' existential. All agent tests pass.","status":"closed","priority":3,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:29.851415-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-09T00:30:07.737051-08:00","closed_at":"2026-02-09T00:30:07.737051-08:00","close_reason":"All child beads complete (9um). AnyAgent replaced with existentials.","labels":["agents","gap-analysis","refactor"]}
{"id":"the-tavern-at-the-spillway-qqld","title":"Stress test: large session history loading","description":"Generate a synthetic JSONL file with 1000+ messages. Load via ClaudeNativeSessionStorage and verify: parsing completes within 2 seconds, memory usage stays bounded, all messages are correctly parsed.","acceptance_criteria":"1000-message JSONL parsed within 2 seconds. Memory doesn't spike beyond 2x the file size. All message types correctly handled.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:34:32.16947-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:02:41.114506-08:00","closed_at":"2026-02-08T23:02:41.114506-08:00","close_reason":"4 session parsing tests: 1000 messages, mixed content blocks, corrupt line resilience, multiple large sessions","labels":["persistence","stress"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-qqld","depends_on_id":"the-tavern-at-the-spillway-58x7","type":"parent-child","created_at":"2026-02-08T22:34:32.171678-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-qye","title":"Refactor ChatViewModel to use AgentActivity enum","description":"Define AgentActivity enum with cases: idle, cogitating(verb:), streaming, toolRunning(name:startTime:). Replace isCogitating, isStreaming, currentToolName, toolStartTime, cogitationVerb with single @Published agentActivity property. Add computed properties for backwards compatibility if needed.","acceptance_criteria":"Single agentActivity property drives all UI state. No impossible state combinations. All 14 ChatViewModel tests and 15 ChatPolish tests pass.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:59.86049-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:58:44.17362-08:00","closed_at":"2026-02-08T22:58:44.17362-08:00","close_reason":"Replaced 5 boolean/optional properties with single AgentActivity enum. Computed properties maintain backward compatibility. All 525 tests pass.","labels":["chat","refactor"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-qye","depends_on_id":"the-tavern-at-the-spillway-n1r","type":"parent-child","created_at":"2026-02-08T22:33:59.862552-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-rm0","title":"GAP-11: Complete TavernError sum type with specific cases","description":"TavernError has only 2 cases: .sessionCorrupt and .internalError(String). The catch-all internalError undermines the sum type error design principle. Missing specific cases for failures that occur in practice.","acceptance_criteria":"TavernError has specific cases for all known failure modes. internalError is reserved for truly unexpected failures. TavernErrorMessages maps all new cases. All error handling code updated.","status":"closed","priority":3,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:52.127014-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:04:53.794436-08:00","closed_at":"2026-02-08T23:04:53.794436-08:00","close_reason":"Both children (75p, 287) complete. 5 new error cases with messages and tests.","labels":["architecture","errors","gap-analysis"]}
{"id":"the-tavern-at-the-spillway-syt","title":"Extract formatTokens() and makeBar() to shared utility","description":"Create a CommandFormatting utility (or extend CommandContext) with formatTokens(Int) -\u003e String and makeBar(filled:width:) -\u003e String. Replace all 7 duplicate implementations (5x formatTokens in CompactCommand, ContextCommand, CostCommand, StatsCommand, ThinkingCommand; 2x makeBar in ContextCommand, StatsCommand).","acceptance_criteria":"Single source of truth for both functions. All 7 call sites updated. All 126 command tests pass.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:23.382383-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:58:20.808789-08:00","closed_at":"2026-02-08T22:58:20.808789-08:00","close_reason":"Extracted formatTokens() and makeBar() to CommandFormatting enum. All 7 call sites updated, 525 tests pass.","labels":["cleanup","commands"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-syt","depends_on_id":"the-tavern-at-the-spillway-bsa","type":"parent-child","created_at":"2026-02-08T22:33:23.384271-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-thv","title":"Hierarchical agent trees — agents spawning children","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nCurrently agents are flat (Jake spawns mortal agents). Design calls for Erlang-style arbitrary depth trees: mortal agents spawning children, children spawning grandchildren, etc. Tree management is synchronous within each actor.\n\nSources: reader section 3 (Mortal Agents, task modes), reader section 5 (Agent Hierarchy diagram), PRD section 4.1 (Agent Types), transcript_2026-01-21-2345 (Erlang-style depth), transcript_2026-01-25-0108 (Component Ownership Chain).\n\nKey questions: What does child agent spawning look like concretely? Same tool handler as Jake? How does tree management interact with the sidecar pattern? What about tree visualization in the UI?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:59:50.280475-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T22:59:50.280475-08:00","labels":["agents","architecture","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-thv","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:23.640637-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-uai","title":"Scroll-to-bottom button","description":"When user scrolls up in the chat, show a floating 'scroll to bottom' button. Clicking scrolls to latest message. Button disappears when already at bottom.","acceptance_criteria":"Button appears when scrolled up. Click scrolls to bottom smoothly. Button hidden when at bottom. Unread message count badge optional.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:46:08.83398-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:57:44.078181-08:00","closed_at":"2026-02-08T18:57:44.078181-08:00","close_reason":"Implemented in commit 482e715 on feature/chat-polish","labels":["chat","polish","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-uai","depends_on_id":"the-tavern-at-the-spillway-vpv","type":"parent-child","created_at":"2026-02-07T19:46:08.836302-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-ulh","title":"Fill spec: lifecycle.md (REQ-LCM)","description":"Fill docs/2-spec/lifecycle.md with concrete requirements from PRD §12 (Fish or Cut Bait), §13 (Rewind and Branch). Cover agent lifecycle, dead agents leave bodies, rewind capabilities. Partially implemented.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:43:10.192689-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:12.584605-08:00","closed_at":"2026-02-08T18:06:12.584605-08:00","close_reason":"Filled lifecycle.md with 7 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-ulh","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:43:10.194906-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-upl","title":"Add loading indicator during session history restore","description":"Since history loading now happens asynchronously, add a brief loading state to ChatViewModel (e.g., isLoadingHistory) so the UI can show a placeholder instead of an empty chat that suddenly fills.","acceptance_criteria":"ChatViewModel has isLoadingHistory state. ChatView shows placeholder during loading. History appears smoothly when complete.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:15.948921-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:55:16.500841-08:00","closed_at":"2026-02-08T22:55:16.500841-08:00","close_reason":"Added isLoadingHistory published property to ChatViewModel. ChatView shows HistoryLoadingIndicator with ProgressView while loading. Tests verify isLoadingHistory starts false and ends false after completion.","labels":["chat","performance","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-upl","depends_on_id":"the-tavern-at-the-spillway-x8t","type":"parent-child","created_at":"2026-02-08T22:33:15.951249-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-v7k","title":"Wire PermissionManager through agent construction chain","description":"PermissionManager must flow from TavernCoordinator through Jake/Servitor to their LiveMessenger instances. Currently agents create LiveMessenger() with no args. Add PermissionManager parameter.","acceptance_criteria":"TavernCoordinator creates PermissionManager, passes to Jake and ServitorSpawner. Spawned servitors inherit the same manager. Verified by constructor injection tests.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:21.104951-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:01:53.274421-08:00","closed_at":"2026-02-08T23:01:53.274421-08:00","close_reason":"PermissionManager flows TavernProject → Jake/ServitorSpawner → LiveMessenger. MessengerFactory now takes agent name. All 526 tests pass.","labels":["agents","di","permissions"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-v7k","depends_on_id":"the-tavern-at-the-spillway-mrh","type":"parent-child","created_at":"2026-02-08T22:32:21.107354-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-vfx","title":"Sidecar pattern — separate I/O actors per agent","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nEach agent needs two actor components: main actor (tree structure, never blocks) and sidecar actor (slow Anthropic I/O). Prevents thread pool starvation with concurrent agents. Global semaphore limits concurrent API calls (~10).\n\nSources: reader section 9 (Sidecar Pattern), ADR-001 shape L (Sidecar), transcript_2026-01-24-shape-selection, Architecture Principles in CLAUDE.md (Concurrency Rules).\n\nKey questions: How does the sidecar actor relate to Swift concurrency (actors)? What is the semaphore implementation? How does cancellation work across main/sidecar? Is the sidecar per-agent or shared?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:08.639987-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:08.639987-08:00","labels":["architecture","concurrency","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-vfx","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:24.012353-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-vij","title":"Fill spec: view-architecture.md (REQ-VIW)","description":"Fill docs/2-spec/view-architecture.md with concrete requirements from Reader §8 (no direct PRD sections). Cover dynamic views, tiles, view modes, context cards. Not yet implemented — spec drives future work.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:43:01.338114-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:13.253871-08:00","closed_at":"2026-02-08T18:06:13.253871-08:00","close_reason":"Filled view-architecture.md with 9 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-vij","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:43:01.340542-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-vpn","title":"Fill formal spec modules from PRD and reader","description":"Populate all spec module skeletons in docs/2-spec/ with concrete, traceable requirements derived from the PRD and reader. This epic stays open indefinitely — new modules may be added as the design evolves. Every child bead of this epic MUST contain a copy of the fill instructions below so it can be worked independently.\n\n## Fill Instructions (copy into every child bead)\n\nTake a skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the module's Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the module's REQ prefix (e.g. REQ-AGT-NNN)\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from 'skeleton' to 'partial' (or 'complete' if fully specified).\n\n8. **Update index.md** — Update the module's status and requirement count in docs/2-spec/index.md.","design":"Each spec module is independent and can be filled in any order. Priority should follow implementation needs — modules covering already-implemented code (agents, observability, user-experience) should be filled first since they can be verified against existing code. Modules for unimplemented features (sandbox, workflows, view-architecture) can wait.","acceptance_criteria":"Every spec module has been promoted from skeleton to at least partial status. All requirements are traceable to PRD sections. index.md accurately reflects module statuses and requirement counts.","notes":"KEEP THIS EPIC OPEN INDEFINITELY. When adding new child beads to this epic, always copy the Fill Instructions from this epic's description into the child bead's description so it can be worked standalone.","status":"open","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:24.915176-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T19:00:34.237484-08:00","labels":["pipeline","spec"]}
{"id":"the-tavern-at-the-spillway-vpp","title":"Collapsible thinking blocks","description":"Thinking/reasoning blocks collapsed by default with 'Thinking...' header. Expand to see full reasoning text.","acceptance_criteria":"Thinking blocks collapsed by default. Expandable to show full reasoning content.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:51.419199-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:09.708244-08:00","closed_at":"2026-02-08T18:09:09.708244-08:00","close_reason":"Implemented in commit e82541e on feature/message-rendering","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-vpp","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"parent-child","created_at":"2026-02-07T19:44:51.421351-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-vpt","title":"Rewind and branch — checkpoint, fork, and replay capability","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nCheckpoint agent state, tweak prompt, fork new timeline. Works at both agent level and changeset level. Enables experimentation without losing prior work.\n\nSources: PRD section 13 (Rewind and Branch), PRD v1 Deferred list.\n\nKey questions: What is checkpointed — session state, doc store state, or both? How does forking work with Claude sessions (new session with context summary)? UI for browsing timelines? Storage cost of checkpoints?","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:05.199059-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:05.199059-08:00","labels":["agents","tavern","workflow"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-vpt","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:25.911291-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-vpv","title":"Epic 9: Chat UX Polish","description":"Quality-of-life features that make the chat feel solid. Running cost display, per-tool progress, agent sidebar status, scroll-to-bottom.","design":"Persistent cost/token counter in toolbar or status bar. Per-tool progress indicator replacing global spinner. Agent sidebar shows idle/working/error. Scroll-to-bottom FAB when user scrolls up.","acceptance_criteria":"Cost display updates in real-time. Tool progress shows which tool is running. Agent status visible in sidebar. Scroll-to-bottom button appears when scrolled up and works correctly.","status":"closed","priority":1,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:43:51.053167-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T19:00:24.859192-08:00","closed_at":"2026-02-08T19:00:24.859192-08:00","close_reason":"All children completed","labels":["chat","polish","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-vpv","depends_on_id":"the-tavern-at-the-spillway-yte","type":"relates-to","created_at":"2026-02-07T19:47:11.932031-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-vu3","title":"Multi-line input (Enter sends, Shift+Enter newline)","description":"Chat input field supports multi-line editing. Enter sends the message, Shift+Enter inserts a newline. Input field grows to accommodate multiple lines.","acceptance_criteria":"Enter sends message. Shift+Enter inserts newline. Input field expands for multi-line content. Shrinks back after sending.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:58.823282-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:52:37.258187-08:00","closed_at":"2026-02-08T18:52:37.258187-08:00","close_reason":"Implemented in commit aefcc83 on feature/input-enhancement","labels":["chat","input","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-vu3","depends_on_id":"the-tavern-at-the-spillway-cgv","type":"parent-child","created_at":"2026-02-07T19:44:58.825406-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-vvz","title":"Max thinking tokens control","description":"Allow controlling max thinking/reasoning tokens via /model command or dedicated command. Pass to SDK.","acceptance_criteria":"Thinking token limit adjustable. Setting persists for session. SDK receives updated limit.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:38.274874-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:13:58.945816-08:00","closed_at":"2026-02-08T18:13:58.945816-08:00","close_reason":"Implemented in commit a279429 on feature/slash-commands","labels":["commands","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-vvz","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"parent-child","created_at":"2026-02-07T19:45:38.276649-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-w3u","title":"Streaming responses — replace batch-only with real-time UI","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nCurrently Jake and mortal agents return batch responses only. Need real-time streaming to the UI with typewriter effect. The SDK (ClodeMonster) returns ClaudeQuery as AsyncSequence of StdoutMessage, which supports streaming.\n\nSources: CLAUDE.md 'Not Implemented', project-status.md Chat \u0026 UI Remaining, PRD section 5.1, transcript_2026-01-24-async-primitives (AsyncStream strategy), reader section 5 Architecture Notes (Async Primitive Strategy).\n\nKey questions: What does the streaming UI look like? Typewriter per-character or per-token? How do content blocks (thinking, tool_use) render during streaming? How does this interact with the batching strategy (collect(.byTime(..., .milliseconds(16))))?","status":"closed","priority":1,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T22:58:07.53562-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-06T17:54:27.604035-08:00","closed_at":"2026-02-06T17:54:27.604035-08:00","close_reason":"Duplicate of the-tavern-at-the-spillway-7g6","labels":["core","tavern","ui"]}
{"id":"the-tavern-at-the-spillway-wdk","title":"Preflight checks — spawn-time verification before agents start","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nEvery agent gets spawn-time verification: sandbox configured, access to required resources, no permissions prompts expected, external accounts authenticated. Failure = agent does not start, parent notified with reason. No degraded mode — pass/fail.\n\nSources: reader section 6 (Preflight Checks), PRD section 6.4 (Preflight Checks).\n\nKey questions: What checks are needed for v1 (no sandbox yet)? How are required resources specified? What does a failed preflight look like in the UI? Retry mechanism?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:59.695064-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:59.695064-08:00","labels":["agents","safety","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-wdk","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:27.357189-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-whf","title":"Progressive unlocks — engagement-based content revelation","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nTrack message count. As count grows, unlock: more cogitating verbs, new naming themes, expanded Jake vocabulary, easter eggs. Subtle hints only — Jake doesnt announce unlocks, just starts using new words.\n\nSources: PRD section 8 (Progressive Unlocks), transcript_2026-01-21-1620 (progressive unlocks concept).\n\nKey questions: Per-project or global count? Linear or milestone-based? Where stored (doc store, UserDefaults)? Reset behavior? Can users prestige? What are the first unlock tiers?","status":"open","priority":4,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:00:47.006459-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:00:47.006459-08:00","labels":["engagement","tavern","ui"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-whf","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:25.384248-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-wmh","title":"Add race condition regression tests for streaming cancellation","description":"Add tests that exercise concurrent cancellation and completion to verify no race. Use rapid cancel/complete cycles and verify _isCogitating always ends up false with no intermediate state leaks.","acceptance_criteria":"Tests exercise cancel-during-completion and completion-during-cancel scenarios. State is always consistent afterward.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:49.486854-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-09T00:23:43.889476-08:00","closed_at":"2026-02-09T00:23:43.889476-08:00","close_reason":"6 regression tests covering rapid cancel, concurrent cancel/completion cycles, and ChatViewModel tool state cleanup. All 29 streaming tests pass.","labels":["concurrency","testing"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-wmh","depends_on_id":"the-tavern-at-the-spillway-lmt","type":"parent-child","created_at":"2026-02-08T22:32:49.489275-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-wue","title":"Collapsible tool result blocks","description":"Tool result blocks collapsed by default. Show status (success/error) in header. Expand to see full result content.","acceptance_criteria":"Tool results collapsed by default. Header shows success/error status. Full content visible on expand.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:51.22385-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:09.596219-08:00","closed_at":"2026-02-08T18:09:09.596219-08:00","close_reason":"Implemented in commit e82541e on feature/message-rendering","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-wue","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"parent-child","created_at":"2026-02-07T19:44:51.22637-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-x8t","title":"GAP-06: Move JSONL session parsing off main thread","description":"ChatViewModel.loadSessionHistory() parses JSONL line-by-line on the main thread via ClaudeNativeSessionStorage. For large sessions (hundreds of messages) this blocks the UI during app launch.","design":"Use Task.detached for the JSONL parsing work in ClaudeNativeSessionStorage.getMessages(). Return parsed results to MainActor for UI update.","acceptance_criteria":"JSONL parsing happens off the main thread. UI remains responsive during large session loading. History still appears correctly.","status":"closed","priority":2,"issue_type":"epic","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:33:15.604083-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T22:55:20.887235-08:00","closed_at":"2026-02-08T22:55:20.887235-08:00","close_reason":"Both children (m20, upl) complete. JSONL parsing runs off main thread. Loading indicator shows during async restore. All Grade 1+2 tests pass.","labels":["gap-analysis","performance","persistence"]}
{"id":"the-tavern-at-the-spillway-xnp","title":"Permission rules display and editing UI","description":"UI to view current permission rules (which tools are always-allowed, current mode) and edit them. Could be a settings sheet or dedicated pane.","acceptance_criteria":"Current rules viewable in UI. Rules editable (add/remove always-allow, change mode). Changes persisted immediately.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:17.421824-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:11.273371-08:00","closed_at":"2026-02-08T18:09:11.273371-08:00","close_reason":"Implemented in commit ddb51a9 on feature/permissions","labels":["permissions","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-xnp","depends_on_id":"the-tavern-at-the-spillway-m3o","type":"parent-child","created_at":"2026-02-07T19:45:17.423985-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-yfc","title":"Fill spec: operating-modes.md (REQ-OPM)","description":"Fill docs/2-spec/operating-modes.md with concrete requirements from PRD §4.4 (Operating Modes), §5.2 (Attention Model). Cover perseverance vs chat mode, two-mode spawn, calling/hanging up.\n\n## Fill Instructions\n\nTake the skeleton spec module and populate it with concrete requirements:\n\n1. **Read upstream sources** — Read the PRD sections listed in the modules Upstream References. Read the corresponding reader sections. Read any transcripts referenced.\n\n2. **Extract requirements** — For each concrete behavior, constraint, or capability described in the PRD, create a requirement entry:\n   - Use the modules REQ prefix\n   - Number sequentially starting from 001\n   - Fill in Source (PRD section), Priority (must-have/should-have/deferred based on PRD language and v1 scope), and Status (specified)\n   - Write a clear, testable description — someone should be able to write a test from the requirement alone\n\n3. **Fill behavior section** — Add state diagrams (Mermaid), interaction sequences, or behavioral descriptions where the requirements involve state transitions or multi-step flows.\n\n4. **Populate open questions** — Pull relevant items from PRD §14 (Open Items) and §15 (Day 1 Questions). Add any ambiguities discovered during extraction.\n\n5. **Identify coverage gaps** — Note areas where the PRD is silent but the module clearly needs specification. These become questions for /conceive sessions.\n\n6. **Update downstream references** — Verify code and test directory paths are accurate for implemented features.\n\n7. **Update status** — Change module status from skeleton to partial (or complete if fully specified).\n\n8. **Update index.md** — Update the modules status and requirement count in docs/2-spec/index.md.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T18:42:41.763131-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:06:09.582344-08:00","closed_at":"2026-02-08T18:06:09.582344-08:00","close_reason":"Filled operating-modes.md with 6 requirements","labels":["pipeline","spec"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-yfc","depends_on_id":"the-tavern-at-the-spillway-vpn","type":"parent-child","created_at":"2026-02-07T18:42:41.765022-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-yte","title":"Token budget and cost visibility — per-agent budgets and spend tracking","description":"DISCUSSION STARTING POINT — not a final task. Discuss with user before promoting to real work.\n\nTrack token spend across agents, set budgets, know which tasks are expensive vs cheap. Token budget exceeded is a fish-or-cut-bait trigger. Parent specifies token budget at spawn time.\n\nSources: PRD section 6.2 (Agent Spawn Configuration - token budget), PRD section 12 (Fish or Cut Bait - budget exceeded), notes_issues-to-plan-for item 3 (Cost visibility).\n\nKey questions: How does ClodeMonster SDK expose token usage? Budget per agent or per tree? What happens at budget limit — hard stop or warning? How does cost roll up to parent?","status":"open","priority":2,"issue_type":"feature","owner":"git@yaakovnemoy.com","created_at":"2026-02-05T23:01:04.83364-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-05T23:01:04.83364-08:00","labels":["agents","metrics","tavern"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-yte","depends_on_id":"the-tavern-at-the-spillway-azu","type":"parent-child","created_at":"2026-02-05T23:02:25.649756-08:00","created_by":"Yaakov M Nemoy"},{"issue_id":"the-tavern-at-the-spillway-yte","depends_on_id":"the-tavern-at-the-spillway-vpv","type":"relates-to","created_at":"2026-02-07T19:47:11.931283-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-zer","title":"Add tests to verify view instrumentation fires","description":"Create Grade 1-2 tests that verify instrumentation logging actually fires. Use OSLogStore or a test log sink to capture log output and assert expected messages appear for body evaluation, lifecycle, and state changes.","acceptance_criteria":"Tests verify at least 3 views produce expected log messages during body evaluation and lifecycle events. Test infrastructure can be reused for future instrumentation validation.","status":"closed","priority":3,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-08T22:32:39.945272-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T23:24:42.049428-08:00","closed_at":"2026-02-08T23:24:42.049428-08:00","close_reason":"14 tests verify instrumentation for all view types. Tests infrastructure reusable for future views.","labels":["instrumentation","testing"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-zer","depends_on_id":"the-tavern-at-the-spillway-7us","type":"parent-child","created_at":"2026-02-08T22:32:39.947473-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-zjp","title":"/compact — compact context","description":"Implement /compact command that triggers SDK context compaction. Shows confirmation and result.","acceptance_criteria":"/compact triggers context compaction via SDK. Result communicated to user.","status":"closed","priority":1,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:45:37.437859-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:13:58.272162-08:00","closed_at":"2026-02-08T18:13:58.272162-08:00","close_reason":"Implemented in commit a279429 on feature/slash-commands","labels":["commands","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-zjp","depends_on_id":"the-tavern-at-the-spillway-cxg","type":"parent-child","created_at":"2026-02-07T19:45:37.439709-08:00","created_by":"Yaakov M Nemoy"}]}
{"id":"the-tavern-at-the-spillway-zka","title":"Inline diff rendering for file edits","description":"When tool results contain file edit diffs, render them as inline diffs with add/remove line highlighting (green/red). Similar to GitHub diff view.","acceptance_criteria":"File edit diffs render with syntax-highlighted add/remove lines. Readable and clearly shows what changed.","status":"closed","priority":2,"issue_type":"task","owner":"git@yaakovnemoy.com","created_at":"2026-02-07T19:44:51.578319-08:00","created_by":"Yaakov M Nemoy","updated_at":"2026-02-08T18:09:10.160266-08:00","closed_at":"2026-02-08T18:09:10.160266-08:00","close_reason":"Implemented in commit e82541e on feature/message-rendering","labels":["chat","ui","v1"],"dependencies":[{"issue_id":"the-tavern-at-the-spillway-zka","depends_on_id":"the-tavern-at-the-spillway-hq1","type":"parent-child","created_at":"2026-02-07T19:44:51.580601-08:00","created_by":"Yaakov M Nemoy"}]}
